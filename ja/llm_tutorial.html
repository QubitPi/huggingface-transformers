<meta charset="utf-8" /><meta name="hf:doc:metadata" content="{&quot;title&quot;:&quot;Generation with LLMs&quot;,&quot;local&quot;:&quot;generation-with-llms&quot;,&quot;sections&quot;:[{&quot;title&quot;:&quot;Generate text&quot;,&quot;local&quot;:&quot;generate-text&quot;,&quot;sections&quot;:[],&quot;depth&quot;:2},{&quot;title&quot;:&quot;Common pitfalls&quot;,&quot;local&quot;:&quot;common-pitfalls&quot;,&quot;sections&quot;:[{&quot;title&quot;:&quot;Generated output is too short/long&quot;,&quot;local&quot;:&quot;generated-output-is-too-shortlong&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3},{&quot;title&quot;:&quot;Incorrect generation mode&quot;,&quot;local&quot;:&quot;incorrect-generation-mode&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3},{&quot;title&quot;:&quot;Wrong padding side&quot;,&quot;local&quot;:&quot;wrong-padding-side&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3}],&quot;depth&quot;:2},{&quot;title&quot;:&quot;Further resources&quot;,&quot;local&quot;:&quot;further-resources&quot;,&quot;sections&quot;:[{&quot;title&quot;:&quot;Advanced generate usage&quot;,&quot;local&quot;:&quot;advanced-generate-usage&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3},{&quot;title&quot;:&quot;LLM leaderboards&quot;,&quot;local&quot;:&quot;llm-leaderboards&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3},{&quot;title&quot;:&quot;Latency and throughput&quot;,&quot;local&quot;:&quot;latency-and-throughput&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3},{&quot;title&quot;:&quot;Related libraries&quot;,&quot;local&quot;:&quot;related-libraries&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3}],&quot;depth&quot;:2}],&quot;depth&quot;:1}">
		<link href="/docs/transformers/main/ja/_app/immutable/assets/0.e3b0c442.css" rel="modulepreload">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/entry/start.e4e638ff.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/scheduler.9bc65507.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/singletons.1a8126ff.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/index.3b203c72.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/paths.b54ca2a4.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/entry/app.9eb58bd7.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/index.707bf1b6.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/nodes/0.aec38eb9.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/each.e59479a4.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/nodes/30.ffab1748.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/Tip.c2ecdbf4.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/CodeBlock.54a9f38d.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/DocNotebookDropdown.41f65cb5.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/globals.7f7f1b26.js">
		<link rel="modulepreload" href="/docs/transformers/main/ja/_app/immutable/chunks/Heading.342b1fa6.js"><!-- HEAD_svelte-u9bgzb_START --><meta name="hf:doc:metadata" content="{&quot;title&quot;:&quot;Generation with LLMs&quot;,&quot;local&quot;:&quot;generation-with-llms&quot;,&quot;sections&quot;:[{&quot;title&quot;:&quot;Generate text&quot;,&quot;local&quot;:&quot;generate-text&quot;,&quot;sections&quot;:[],&quot;depth&quot;:2},{&quot;title&quot;:&quot;Common pitfalls&quot;,&quot;local&quot;:&quot;common-pitfalls&quot;,&quot;sections&quot;:[{&quot;title&quot;:&quot;Generated output is too short/long&quot;,&quot;local&quot;:&quot;generated-output-is-too-shortlong&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3},{&quot;title&quot;:&quot;Incorrect generation mode&quot;,&quot;local&quot;:&quot;incorrect-generation-mode&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3},{&quot;title&quot;:&quot;Wrong padding side&quot;,&quot;local&quot;:&quot;wrong-padding-side&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3}],&quot;depth&quot;:2},{&quot;title&quot;:&quot;Further resources&quot;,&quot;local&quot;:&quot;further-resources&quot;,&quot;sections&quot;:[{&quot;title&quot;:&quot;Advanced generate usage&quot;,&quot;local&quot;:&quot;advanced-generate-usage&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3},{&quot;title&quot;:&quot;LLM leaderboards&quot;,&quot;local&quot;:&quot;llm-leaderboards&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3},{&quot;title&quot;:&quot;Latency and throughput&quot;,&quot;local&quot;:&quot;latency-and-throughput&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3},{&quot;title&quot;:&quot;Related libraries&quot;,&quot;local&quot;:&quot;related-libraries&quot;,&quot;sections&quot;:[],&quot;depth&quot;:3}],&quot;depth&quot;:2}],&quot;depth&quot;:1}"><!-- HEAD_svelte-u9bgzb_END -->      <p></p>   <h1 class="relative group"><a id="generation-with-llms" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#generation-with-llms"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>Generation with LLMs</span></h1>  <div class="flex space-x-1 absolute z-10 right-0 top-0"> <div class="relative colab-dropdown "> <button class="  " type="button">  <img alt="Open In Colab" class="!m-0" src="https://colab.research.google.com/assets/colab-badge.svg"> </button>    </div> <div class="relative colab-dropdown "> <button class="  " type="button">  <img alt="Open In Studio Lab" class="!m-0" src="https://studiolab.sagemaker.aws/studiolab.svg"> </button>    </div></div> <p data-svelte-h="svelte-1p8oyus">LLMã€ã¾ãŸã¯Large Language Modelsï¼ˆå¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼‰ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆã®éµã¨ãªã‚‹è¦ç´ ã§ã™ã€‚è¦ã™ã‚‹ã«ã€ã“ã‚Œã‚‰ã¯å¤§è¦æ¨¡ãªäº‹å‰è¨“ç·´æ¸ˆã¿ãƒˆãƒ©ãƒ³ã‚¹ãƒ•ã‚©ãƒ¼ãƒãƒ¼ãƒ¢ãƒ‡ãƒ«ã§ã€ä¸ãˆã‚‰ã‚ŒãŸå…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆã«åŸºã¥ã„ã¦æ¬¡ã®å˜èªï¼ˆã¾ãŸã¯ã€ã‚ˆã‚Šæ­£ç¢ºã«ã¯ãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã‚’äºˆæ¸¬ã™ã‚‹ã‚ˆã†ã«è¨“ç·´ã•ã‚Œã¦ã„ã¾ã™ã€‚ãƒˆãƒ¼ã‚¯ãƒ³ã‚’1ã¤ãšã¤äºˆæ¸¬ã™ã‚‹ãŸã‚ã€ãƒ¢ãƒ‡ãƒ«ã‚’å‘¼ã³å‡ºã™ã ã‘ã§ã¯æ–°ã—ã„æ–‡ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã«ä½•ã‹ã‚ˆã‚Šç²¾å·§ãªã“ã¨ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚è‡ªå·±å›å¸°ç”Ÿæˆã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p> <p data-svelte-h="svelte-18326uo">è‡ªå·±å›å¸°ç”Ÿæˆã¯ã€æ¨è«–æ™‚ã®æ‰‹ç¶šãã§ã€ã„ãã¤ã‹ã®åˆæœŸå…¥åŠ›ã‚’ä¸ãˆãŸçŠ¶æ…‹ã§ã€ãƒ¢ãƒ‡ãƒ«ã‚’åå¾©çš„ã«å‘¼ã³å‡ºã™æ‰‹æ³•ã§ã™ã€‚ğŸ¤— Transformersã§ã¯ã€ã“ã‚Œã¯<a href="/docs/transformers/main/ja/main_classes/text_generation#transformers.GenerationMixin.generate">generate()</a>ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã£ã¦å‡¦ç†ã•ã‚Œã€ã“ã‚Œã¯ç”Ÿæˆèƒ½åŠ›ã‚’æŒã¤ã™ã¹ã¦ã®ãƒ¢ãƒ‡ãƒ«ã§åˆ©ç”¨å¯èƒ½ã§ã™ã€‚</p> <p data-svelte-h="svelte-10d5jzs">ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ä»¥ä¸‹ã®ã“ã¨ã‚’ç¤ºã—ã¾ã™ï¼š</p> <ul data-svelte-h="svelte-114gruu"><li>LLMã‚’ä½¿ç”¨ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”Ÿæˆã™ã‚‹æ–¹æ³•</li> <li>ä¸€èˆ¬çš„ãªè½ã¨ã—ç©´ã‚’å›é¿ã™ã‚‹æ–¹æ³•</li> <li>LLMã‚’æœ€å¤§é™ã«æ´»ç”¨ã™ã‚‹ãŸã‚ã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</li></ul> <p data-svelte-h="svelte-5jpx9c">å§‹ã‚ã‚‹å‰ã«ã€å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã™ã¹ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š</p> <div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg> <div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div> Copied</div></button></div> <pre class=""><!-- HTML_TAG_START -->pip install transformers bitsandbytes&gt;=0.39.0 -q<!-- HTML_TAG_END --></pre></div>  <h2 class="relative group"><a id="generate-text" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#generate-text"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>Generate text</span></h2> <p data-svelte-h="svelte-1kvqgos"><a href="tasks/language_modeling">å› æœè¨€èªãƒ¢ãƒ‡ãƒªãƒ³ã‚°</a>ã®ãŸã‚ã«ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã•ã‚ŒãŸè¨€èªãƒ¢ãƒ‡ãƒ«ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆãƒˆãƒ¼ã‚¯ãƒ³ã®ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’å…¥åŠ›ã¨ã—ã¦å—ã‘å–ã‚Šã€æ¬¡ã®ãƒˆãƒ¼ã‚¯ãƒ³ã®ç¢ºç‡åˆ†å¸ƒã‚’è¿”ã—ã¾ã™ã€‚</p>  <figure class="image table text-center m-0 w-full" data-svelte-h="svelte-hjgddv"><video style="max-width: 90%; margin: auto;" autoplay="" loop="" muted="" playsinline="" src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/blog/assisted-generation/gif_1_1080p.mov"></video> <figcaption>&quot;Forward pass of an LLM&quot;</figcaption></figure> <p data-svelte-h="svelte-1vvn9v3">LLMï¼ˆLanguage Modelï¼‰ã«ã‚ˆã‚‹è‡ªå·±å›å¸°ç”Ÿæˆã®é‡è¦ãªå´é¢ã®1ã¤ã¯ã€ã“ã®ç¢ºç‡åˆ†å¸ƒã‹ã‚‰æ¬¡ã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’é¸æŠã™ã‚‹æ–¹æ³•ã§ã™ã€‚ã“ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€æ¬¡ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ãŸã‚ã®ãƒˆãƒ¼ã‚¯ãƒ³ãŒå¾—ã‚‰ã‚Œã‚‹é™ã‚Šã€ä½•ã§ã‚‚å¯èƒ½ã§ã™ã€‚ã“ã‚Œã¯ã€ç¢ºç‡åˆ†å¸ƒã‹ã‚‰æœ€ã‚‚å¯èƒ½æ€§ã®é«˜ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’é¸æŠã™ã‚‹ã ã‘ã®ã‚·ãƒ³ãƒ—ãƒ«ãªæ–¹æ³•ã‹ã‚‰ã€çµæœã®åˆ†å¸ƒã‹ã‚‰ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã™ã‚‹å‰ã«æ•°ã€…ã®å¤‰æ›ã‚’é©ç”¨ã™ã‚‹ã»ã©è¤‡é›‘ãªæ–¹æ³•ã¾ã§ã€ã‚ã‚‰ã‚†ã‚‹æ–¹æ³•ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚</p>  <figure class="image table text-center m-0 w-full" data-svelte-h="svelte-1uqc9hk"><video style="max-width: 90%; margin: auto;" autoplay="" loop="" muted="" playsinline="" src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/blog/assisted-generation/gif_2_1080p.mov"></video> <figcaption>&quot;Autoregressive generation iteratively selects the next token from a probability distribution to generate text&quot;</figcaption></figure> <p data-svelte-h="svelte-1q7bq18">ä¸Šè¨˜ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€ã‚ã‚‹åœæ­¢æ¡ä»¶ãŒæº€ãŸã•ã‚Œã‚‹ã¾ã§åå¾©çš„ã«ç¹°ã‚Šè¿”ã•ã‚Œã¾ã™ã€‚ç†æƒ³çš„ã«ã¯ã€åœæ­¢æ¡ä»¶ã¯ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã£ã¦æŒ‡ç¤ºã•ã‚Œã€ãƒ¢ãƒ‡ãƒ«ã¯çµ‚äº†ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ï¼ˆ<code>EOS</code>ï¼‰ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å‡ºåŠ›ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’å­¦ç¿’ã™ã¹ãã§ã™ã€‚ã“ã‚ŒãŒãã†ã§ãªã„å ´åˆã€ç”Ÿæˆã¯ã‚ã‚‰ã‹ã˜ã‚å®šç¾©ã•ã‚ŒãŸæœ€å¤§é•·ã«é”ã—ãŸã¨ãã«åœæ­¢ã—ã¾ã™ã€‚</p> <p data-svelte-h="svelte-1xlt8wi">ãƒˆãƒ¼ã‚¯ãƒ³é¸æŠã‚¹ãƒ†ãƒƒãƒ—ã¨åœæ­¢æ¡ä»¶ã‚’é©åˆ‡ã«è¨­å®šã™ã‚‹ã“ã¨ã¯ã€ãƒ¢ãƒ‡ãƒ«ãŒã‚¿ã‚¹ã‚¯ã§æœŸå¾…ã©ãŠã‚Šã«æŒ¯ã‚‹èˆã†ãŸã‚ã«é‡è¦ã§ã™ã€‚ãã‚ŒãŒã€å„ãƒ¢ãƒ‡ãƒ«ã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸ <a href="/docs/transformers/main/ja/main_classes/text_generation#transformers.GenerationConfig">GenerationConfig</a> ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ç†ç”±ã§ã‚ã‚Šã€ã“ã‚Œã«ã¯å„ªã‚ŒãŸãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ç”Ÿæˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ãŒå«ã¾ã‚Œã€ãƒ¢ãƒ‡ãƒ«ã¨ä¸€ç·’ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚</p> <p data-svelte-h="svelte-1gzvd9k">ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦è©±ã—ã¾ã—ã‚‡ã†ï¼</p>  <div class="course-tip  bg-gradient-to-br dark:bg-gradient-to-r before:border-green-500 dark:before:border-green-800 from-green-50 dark:from-gray-900 to-white dark:to-gray-950 border border-green-50 text-green-700 dark:text-gray-400"><p data-svelte-h="svelte-1sday44">åŸºæœ¬çš„ãªLLMã®ä½¿ç”¨ã«èˆˆå‘³ãŒã‚ã‚‹å ´åˆã€é«˜ãƒ¬ãƒ™ãƒ«ã® <a href="pipeline_tutorial"><code>Pipeline</code></a> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒè‰¯ã„å‡ºç™ºç‚¹ã§ã™ã€‚ãŸã ã—ã€LLMã¯ã—ã°ã—ã°é‡å­åŒ–ã‚„ãƒˆãƒ¼ã‚¯ãƒ³é¸æŠã‚¹ãƒ†ãƒƒãƒ—ã®ç´°ã‹ã„åˆ¶å¾¡ãªã©ã®é«˜åº¦ãªæ©Ÿèƒ½ãŒå¿…è¦ã§ã‚ã‚Šã€ã“ã‚Œã¯ <a href="/docs/transformers/main/ja/main_classes/text_generation#transformers.GenerationMixin.generate">generate()</a> ã‚’ä»‹ã—ã¦æœ€è‰¯ã«è¡Œã‚ã‚Œã¾ã™ã€‚LLMã¨ã®è‡ªå·±å›å¸°ç”Ÿæˆã¯ãƒªã‚½ãƒ¼ã‚¹ãŒå¤šãå¿…è¦ã§ã‚ã‚Šã€é©åˆ‡ãªã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã®ãŸã‚ã«GPUã§å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p></div>  <p data-svelte-h="svelte-1mik2gq">ã¾ãšã€ãƒ¢ãƒ‡ãƒ«ã‚’èª­ã¿è¾¼ã‚€å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p> <div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg> <div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div> Copied</div></button></div> <pre class=""><!-- HTML_TAG_START --><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForCausalLM

<span class="hljs-meta">&gt;&gt;&gt; </span>model = AutoModelForCausalLM.from_pretrained(
<span class="hljs-meta">... </span>    <span class="hljs-string">&quot;openlm-research/open_llama_7b&quot;</span>, device_map=<span class="hljs-string">&quot;auto&quot;</span>, load_in_4bit=<span class="hljs-literal">True</span>
<span class="hljs-meta">... </span>)<!-- HTML_TAG_END --></pre></div> <p data-svelte-h="svelte-dj98s8"><code>from_pretrained</code> å‘¼ã³å‡ºã—ã§2ã¤ã®ãƒ•ãƒ©ã‚°ãŒã‚ã‚‹ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼š</p> <ul data-svelte-h="svelte-k3ww82"><li><code>device_map</code> ã¯ãƒ¢ãƒ‡ãƒ«ã‚’ã‚ãªãŸã®GPUã«ç§»å‹•ã•ã›ã¾ã™</li> <li><code>load_in_4bit</code> ã¯<a href="main_classes/quantization">4ãƒ“ãƒƒãƒˆã®å‹•çš„é‡å­åŒ–</a>ã‚’é©ç”¨ã—ã¦ãƒªã‚½ãƒ¼ã‚¹è¦ä»¶ã‚’å¤§å¹…ã«å‰Šæ¸›ã—ã¾ã™</li></ul> <p data-svelte-h="svelte-1ved9f1">ãƒ¢ãƒ‡ãƒ«ã‚’åˆæœŸåŒ–ã™ã‚‹ä»–ã®æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã“ã‚Œã¯LLMã‚’å§‹ã‚ã‚‹ãŸã‚ã®è‰¯ã„åŸºæº–ã§ã™ã€‚</p> <p data-svelte-h="svelte-1vkr8y3">æ¬¡ã«ã€<a href="tokenizer_summary">ãƒˆãƒ¼ã‚¯ãƒŠã‚¤ã‚¶</a>ã‚’ä½¿ç”¨ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚’å‰å‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p> <div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg> <div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div> Copied</div></button></div> <pre class=""><!-- HTML_TAG_START --><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer

<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">&quot;openlm-research/open_llama_7b&quot;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>model_inputs = tokenizer([<span class="hljs-string">&quot;A list of colors: red, blue&quot;</span>], return_tensors=<span class="hljs-string">&quot;pt&quot;</span>).to(<span class="hljs-string">&quot;cuda&quot;</span>)<!-- HTML_TAG_END --></pre></div> <p data-svelte-h="svelte-1ri477u"><code>model_inputs</code> å¤‰æ•°ã¯ã€ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã¨ã‚¢ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãƒã‚¹ã‚¯ã‚’ä¿æŒã—ã¦ã„ã¾ã™ã€‚ <a href="/docs/transformers/main/ja/main_classes/text_generation#transformers.GenerationMixin.generate">generate()</a> ã¯ã€ã‚¢ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãƒã‚¹ã‚¯ãŒæ¸¡ã•ã‚Œã¦ã„ãªã„å ´åˆã§ã‚‚ã€æœ€å–„ã®åŠªåŠ›ã‚’ã—ã¦ãã‚Œã‚’æ¨æ¸¬ã—ã‚ˆã†ã¨ã—ã¾ã™ãŒã€ã§ãã‚‹é™ã‚Šæ¸¡ã™ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚æœ€é©ãªçµæœã‚’å¾—ã‚‹ãŸã‚ã§ã™ã€‚</p> <p data-svelte-h="svelte-voqumo">æœ€å¾Œã«ã€<a href="/docs/transformers/main/ja/main_classes/text_generation#transformers.GenerationMixin.generate">generate()</a> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã—ã¦ç”Ÿæˆã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã—ã€ãã‚Œã‚’è¡¨ç¤ºã™ã‚‹å‰ã«ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p> <div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg> <div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div> Copied</div></button></div> <pre class=""><!-- HTML_TAG_START --><span class="hljs-meta">&gt;&gt;&gt; </span>generated_ids = model.generate(**model_inputs)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.batch_decode(generated_ids, skip_special_tokens=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]
<span class="hljs-string">&#x27;A list of colors: red, blue, green, yellow, black, white, and brown&#x27;</span><!-- HTML_TAG_END --></pre></div> <p data-svelte-h="svelte-1fgh7wz">ã“ã‚Œã§å®Œäº†ã§ã™ï¼ã‚ãšã‹ãªã‚³ãƒ¼ãƒ‰è¡Œæ•°ã§ã€LLMï¼ˆLarge Language Modelï¼‰ã®ãƒ‘ãƒ¯ãƒ¼ã‚’æ´»ç”¨ã§ãã¾ã™ã€‚</p>  <h2 class="relative group"><a id="common-pitfalls" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#common-pitfalls"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>Common pitfalls</span></h2> <p data-svelte-h="svelte-k0wny5"><a href="generation_strategies">ç”Ÿæˆæˆ¦ç•¥</a>ã¯ãŸãã•ã‚“ã‚ã‚Šã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å€¤ãŒã‚ãªãŸã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«é©ã—ã¦ã„ãªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å‡ºåŠ›ãŒæœŸå¾…é€šã‚Šã§ãªã„å ´åˆã€æœ€ã‚‚ä¸€èˆ¬çš„ãªè½ã¨ã—ç©´ã¨ãã®å›é¿æ–¹æ³•ã®ãƒªã‚¹ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚</p> <div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg> <div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div> Copied</div></button></div> <pre class=""><!-- HTML_TAG_START --><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForCausalLM, AutoTokenizer

<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">&quot;openlm-research/open_llama_7b&quot;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.pad_token = tokenizer.eos_token  <span class="hljs-comment"># Llama has no pad token by default</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>model = AutoModelForCausalLM.from_pretrained(
<span class="hljs-meta">... </span>    <span class="hljs-string">&quot;openlm-research/open_llama_7b&quot;</span>, device_map=<span class="hljs-string">&quot;auto&quot;</span>, load_in_4bit=<span class="hljs-literal">True</span>
<span class="hljs-meta">... </span>)<!-- HTML_TAG_END --></pre></div>  <h3 class="relative group"><a id="generated-output-is-too-shortlong" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#generated-output-is-too-shortlong"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>Generated output is too short/long</span></h3> <p data-svelte-h="svelte-80musy"><a href="/docs/transformers/main/ja/main_classes/text_generation#transformers.GenerationConfig">GenerationConfig</a> ãƒ•ã‚¡ã‚¤ãƒ«ã§æŒ‡å®šã•ã‚Œã¦ã„ãªã„å ´åˆã€<code>generate</code> ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ€å¤§ã§ 20 ãƒˆãƒ¼ã‚¯ãƒ³ã¾ã§è¿”ã—ã¾ã™ã€‚æˆ‘ã€…ã¯ <code>generate</code> ã‚³ãƒ¼ãƒ«ã§ <code>max_new_tokens</code> ã‚’æ‰‹å‹•ã§è¨­å®šã™ã‚‹ã“ã¨ã‚’å¼·ããŠå‹§ã‚ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€è¿”ã•ã‚Œã‚‹æ–°ã—ã„ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ€å¤§æ•°ã‚’åˆ¶å¾¡ã§ãã¾ã™ã€‚LLMï¼ˆæ­£ç¢ºã«ã¯ã€<a href="https://huggingface.co/learn/nlp-course/chapter1/6?fw=pt" rel="nofollow">ãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼å°‚ç”¨ãƒ¢ãƒ‡ãƒ«</a>ï¼‰ã‚‚å‡ºåŠ›ã®ä¸€éƒ¨ã¨ã—ã¦å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¿”ã™ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p> <div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg> <div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div> Copied</div></button></div> <pre class=""><!-- HTML_TAG_START --><span class="hljs-meta">&gt;&gt;&gt; </span>model_inputs = tokenizer([<span class="hljs-string">&quot;A sequence of numbers: 1, 2&quot;</span>], return_tensors=<span class="hljs-string">&quot;pt&quot;</span>).to(<span class="hljs-string">&quot;cuda&quot;</span>)

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># By default, the output will contain up to 20 tokens</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>generated_ids = model.generate(**model_inputs)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.batch_decode(generated_ids, skip_special_tokens=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]
<span class="hljs-string">&#x27;A sequence of numbers: 1, 2, 3, 4, 5&#x27;</span>

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># Setting `max_new_tokens` allows you to control the maximum length</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>generated_ids = model.generate(**model_inputs, max_new_tokens=<span class="hljs-number">50</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.batch_decode(generated_ids, skip_special_tokens=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]
<span class="hljs-string">&#x27;A sequence of numbers: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16,&#x27;</span><!-- HTML_TAG_END --></pre></div>  <h3 class="relative group"><a id="incorrect-generation-mode" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#incorrect-generation-mode"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>Incorrect generation mode</span></h3> <p data-svelte-h="svelte-gscn2d">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ <a href="/docs/transformers/main/ja/main_classes/text_generation#transformers.GenerationConfig">GenerationConfig</a> ãƒ•ã‚¡ã‚¤ãƒ«ã§æŒ‡å®šã•ã‚Œã¦ã„ãªã„é™ã‚Šã€<code>generate</code> ã¯å„ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§æœ€ã‚‚å¯èƒ½æ€§ã®é«˜ã„ãƒˆãƒ¼ã‚¯ãƒ³ã‚’é¸æŠã—ã¾ã™ï¼ˆè²ªæ¬²ãƒ‡ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼‰ã€‚ã‚¿ã‚¹ã‚¯ã«å¿œã˜ã¦ã€ã“ã‚Œã¯æœ›ã¾ã—ããªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚„ã‚¨ãƒƒã‚»ã‚¤ã®ã‚ˆã†ãªå‰µé€ çš„ãªã‚¿ã‚¹ã‚¯ã§ã¯ã€ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãŒæœ‰ç›Šã§ã™ã€‚ä¸€æ–¹ã€éŸ³å£°ã®è»¢å†™ã‚„ç¿»è¨³ã®ã‚ˆã†ãªå…¥åŠ›ã«åŸºã¥ãã‚¿ã‚¹ã‚¯ã§ã¯ã€è²ªæ¬²ãƒ‡ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒæœ‰ç›Šã§ã™ã€‚<code>do_sample=True</code> ã§ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã§ãã¾ã™ã€‚ã“ã®ãƒˆãƒ”ãƒƒã‚¯ã«ã¤ã„ã¦ã®è©³ç´°ã¯ã€ã“ã®<a href="https://huggingface.co/blog/how-to-generate" rel="nofollow">ãƒ–ãƒ­ã‚°ãƒã‚¹ãƒˆ</a>ã§å­¦ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚</p> <div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg> <div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div> Copied</div></button></div> <pre class=""><!-- HTML_TAG_START --><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># Set seed or reproducibility -- you don&#x27;t need this unless you want full reproducibility</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> set_seed
<span class="hljs-meta">&gt;&gt;&gt; </span>set_seed(<span class="hljs-number">0</span>)

<span class="hljs-meta">&gt;&gt;&gt; </span>model_inputs = tokenizer([<span class="hljs-string">&quot;I am a cat.&quot;</span>], return_tensors=<span class="hljs-string">&quot;pt&quot;</span>).to(<span class="hljs-string">&quot;cuda&quot;</span>)

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># LLM + greedy decoding = repetitive, boring output</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>generated_ids = model.generate(**model_inputs)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.batch_decode(generated_ids, skip_special_tokens=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]
<span class="hljs-string">&#x27;I am a cat. I am a cat. I am a cat. I am a cat&#x27;</span>

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># With sampling, the output becomes more creative!</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>generated_ids = model.generate(**model_inputs, do_sample=<span class="hljs-literal">True</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.batch_decode(generated_ids, skip_special_tokens=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]
<span class="hljs-string">&#x27;I am a cat.\nI just need to be. I am always.\nEvery time&#x27;</span><!-- HTML_TAG_END --></pre></div>  <h3 class="relative group"><a id="wrong-padding-side" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#wrong-padding-side"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>Wrong padding side</span></h3> <p data-svelte-h="svelte-fd0pc8">LLMï¼ˆLarge Language Modelsï¼‰ã¯<a href="https://huggingface.co/learn/nlp-course/chapter1/6?fw=pt" rel="nofollow">ãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼å°‚ç”¨</a>ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã‚ã‚Šã€å…¥åŠ›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç¹°ã‚Šè¿”ã—å‡¦ç†ã™ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚å…¥åŠ›ãŒåŒã˜é•·ã•ã§ãªã„å ´åˆã€ãã‚Œã‚‰ã‚’ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚LLMã¯ãƒ‘ãƒƒãƒ‰ãƒˆãƒ¼ã‚¯ãƒ³ã‹ã‚‰ã®ç¶šãã‚’å­¦ç¿’ã—ã¦ã„ãªã„ãŸã‚ã€å…¥åŠ›ã¯å·¦ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€ç”Ÿæˆã«å¯¾ã—ã¦æ³¨ç›®ãƒã‚¹ã‚¯ã‚’æ¸¡ã—å¿˜ã‚Œãªã„ã‚ˆã†ã«ã—ã¦ãã ã•ã„ï¼</p> <div class="code-block relative"><div class="absolute top-2.5 right-4"><button class="inline-flex items-center relative text-sm focus:text-green-500 cursor-pointer focus:outline-none transition duration-200 ease-in-out opacity-0 mx-0.5   text-gray-600 " title="code excerpt" type="button"><svg class="" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" fill="currentColor" focusable="false" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path d="M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z" transform="translate(0)"></path><path d="M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z" transform="translate(0)"></path><rect fill="none" width="32" height="32"></rect></svg> <div class="absolute pointer-events-none transition-opacity bg-black text-white py-1 px-2 leading-tight rounded font-normal shadow left-1/2 top-full transform -translate-x-1/2 translate-y-2 opacity-0"><div class="absolute bottom-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-black border-4 border-t-0" style="border-left-color: transparent; border-right-color: transparent; "></div> Copied</div></button></div> <pre class=""><!-- HTML_TAG_START --><span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># The tokenizer initialized above has right-padding active by default: the 1st sequence,</span>
<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># which is shorter, has padding on the right side. Generation fails.</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>model_inputs = tokenizer(
<span class="hljs-meta">... </span>    [<span class="hljs-string">&quot;1, 2, 3&quot;</span>, <span class="hljs-string">&quot;A, B, C, D, E&quot;</span>], padding=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>
<span class="hljs-meta">... </span>).to(<span class="hljs-string">&quot;cuda&quot;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>generated_ids = model.generate(**model_inputs)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.batch_decode(generated_ids[<span class="hljs-number">0</span>], skip_special_tokens=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]
<span class="hljs-string">&#x27;&#x27;</span>

<span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-comment"># With left-padding, it works as expected!</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">&quot;openlm-research/open_llama_7b&quot;</span>, padding_side=<span class="hljs-string">&quot;left&quot;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.pad_token = tokenizer.eos_token  <span class="hljs-comment"># Llama has no pad token by default</span>
<span class="hljs-meta">&gt;&gt;&gt; </span>model_inputs = tokenizer(
<span class="hljs-meta">... </span>    [<span class="hljs-string">&quot;1, 2, 3&quot;</span>, <span class="hljs-string">&quot;A, B, C, D, E&quot;</span>], padding=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>
<span class="hljs-meta">... </span>).to(<span class="hljs-string">&quot;cuda&quot;</span>)
<span class="hljs-meta">&gt;&gt;&gt; </span>generated_ids = model.generate(**model_inputs)
<span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.batch_decode(generated_ids, skip_special_tokens=<span class="hljs-literal">True</span>)[<span class="hljs-number">0</span>]
<span class="hljs-string">&#x27;1, 2, 3, 4, 5, 6,&#x27;</span><!-- HTML_TAG_END --></pre></div>  <h2 class="relative group"><a id="further-resources" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#further-resources"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>Further resources</span></h2> <p data-svelte-h="svelte-1d601do">ã‚ªãƒ¼ãƒˆãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ–ç”Ÿæˆãƒ—ãƒ­ã‚»ã‚¹ã¯æ¯”è¼ƒçš„ç°¡å˜ã§ã™ãŒã€LLMã‚’æœ€å¤§é™ã«æ´»ç”¨ã™ã‚‹ã“ã¨ã¯å¤šãã®è¦ç´ ãŒçµ¡ã‚€ãŸã‚ã€æŒ‘æˆ¦çš„ãªè©¦ã¿ã¨ãªã‚Šã¾ã™ã€‚LLMã®ä½¿ç”¨ã¨ç†è§£ã‚’ã•ã‚‰ã«æ·±ã‚ã‚‹ãŸã‚ã®æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã«ã¤ã„ã¦ã¯ä»¥ä¸‹ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ã”è¦§ãã ã•ã„ã€‚</p>   <h3 class="relative group"><a id="advanced-generate-usage" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#advanced-generate-usage"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>Advanced generate usage</span></h3> <ol data-svelte-h="svelte-142agms"><li><a href="generation_strategies">ã‚¬ã‚¤ãƒ‰</a>ï¼šç•°ãªã‚‹ç”Ÿæˆæ–¹æ³•ã‚’åˆ¶å¾¡ã™ã‚‹æ–¹æ³•ã€ç”Ÿæˆæ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šæ–¹æ³•ã€å‡ºåŠ›ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°æ–¹æ³•ã«ã¤ã„ã¦ã®ã‚¬ã‚¤ãƒ‰;</li> <li><a href="/docs/transformers/main/ja/main_classes/text_generation#transformers.GenerationConfig">GenerationConfig</a>ã€<a href="/docs/transformers/main/ja/main_classes/text_generation#transformers.GenerationMixin.generate">generate()</a>ã€ãŠã‚ˆã³<a href="internal/generation_utils">ç”Ÿæˆé–¢é€£ã‚¯ãƒ©ã‚¹</a>ã«é–¢ã™ã‚‹APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã€‚</li></ol>  <h3 class="relative group"><a id="llm-leaderboards" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#llm-leaderboards"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>LLM leaderboards</span></h3> <ol data-svelte-h="svelte-1mag1j5"><li><a href="https://huggingface.co/spaces/HuggingFaceH4/open_llm_leaderboard" rel="nofollow">Open LLM ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰</a>ï¼šã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ¢ãƒ‡ãƒ«ã®å“è³ªã«ç„¦ç‚¹ã‚’å½“ã¦ãŸãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰;</li> <li><a href="https://huggingface.co/spaces/optimum/llm-perf-leaderboard" rel="nofollow">Open LLM-Perf ãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰</a>ï¼šLLMã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã«ç„¦ç‚¹ã‚’å½“ã¦ãŸãƒªãƒ¼ãƒ€ãƒ¼ãƒœãƒ¼ãƒ‰ã€‚</li></ol>  <h3 class="relative group"><a id="latency-and-throughput" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#latency-and-throughput"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>Latency and throughput</span></h3> <ol data-svelte-h="svelte-1d7xcac"><li><a href="main_classes/quantization">ã‚¬ã‚¤ãƒ‰</a>ï¼šãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ã‚¯ã‚ªãƒ³ã‚¿ã‚¤ã‚ºã«é–¢ã™ã‚‹ã‚¬ã‚¤ãƒ‰ã€‚ã“ã‚Œã«ã‚ˆã‚Šãƒ¡ãƒ¢ãƒªè¦ä»¶ã‚’åŠ‡çš„ã«å‰Šæ¸›ã™ã‚‹æ–¹æ³•ãŒç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚</li></ol>  <h3 class="relative group"><a id="related-libraries" class="header-link block pr-1.5 text-lg no-hover:hidden with-hover:absolute with-hover:p-1.5 with-hover:opacity-0 with-hover:group-hover:opacity-100 with-hover:right-full" href="#related-libraries"><span><svg class="" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 256"><path d="M167.594 88.393a8.001 8.001 0 0 1 0 11.314l-67.882 67.882a8 8 0 1 1-11.314-11.315l67.882-67.881a8.003 8.003 0 0 1 11.314 0zm-28.287 84.86l-28.284 28.284a40 40 0 0 1-56.567-56.567l28.284-28.284a8 8 0 0 0-11.315-11.315l-28.284 28.284a56 56 0 0 0 79.196 79.197l28.285-28.285a8 8 0 1 0-11.315-11.314zM212.852 43.14a56.002 56.002 0 0 0-79.196 0l-28.284 28.284a8 8 0 1 0 11.314 11.314l28.284-28.284a40 40 0 0 1 56.568 56.567l-28.285 28.285a8 8 0 0 0 11.315 11.314l28.284-28.284a56.065 56.065 0 0 0 0-79.196z" fill="currentColor"></path></svg></span></a> <span>Related libraries</span></h3> <ol data-svelte-h="svelte-1v1y2ns"><li><a href="https://github.com/huggingface/text-generation-inference" rel="nofollow"><code>text-generation-inference</code></a>ï¼šLLMç”¨ã®æœ¬ç•ªå‘ã‘ã‚µãƒ¼ãƒãƒ¼;</li> <li><a href="https://github.com/huggingface/optimum" rel="nofollow"><code>optimum</code></a>ï¼šç‰¹å®šã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ‡ãƒã‚¤ã‚¹å‘ã‘ã«æœ€é©åŒ–ã•ã‚ŒãŸğŸ¤— Transformersã®æ‹¡å¼µã€‚</li></ol>  <p></p> 
			
			<script>
				{
					__sveltekit_l6ewbf = {
						assets: "/docs/transformers/main/ja",
						base: "/docs/transformers/main/ja",
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("/docs/transformers/main/ja/_app/immutable/entry/start.e4e638ff.js"),
						import("/docs/transformers/main/ja/_app/immutable/entry/app.9eb58bd7.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 30],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		
