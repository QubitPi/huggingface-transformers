import{s as Qt,o as Lt,n as xt}from"../chunks/scheduler.56730f09.js";import{S as It,i as Nt,g as p,s,r as m,A as zt,h as o,f as l,c as n,j as Xt,u as r,x as u,k as $e,y as Pt,a,v as d,d as f,t as M,w as b}from"../chunks/index.1f144517.js";import{T as Et}from"../chunks/Tip.41e845e5.js";import{C as $}from"../chunks/CodeBlock.738eeccb.js";import{D as Yt}from"../chunks/DocNotebookDropdown.243c3df7.js";import{H as Z}from"../chunks/Heading.57d46534.js";function qt(ue){let i,y="<code>AutoModelFor</code> í´ë˜ìŠ¤ë‚˜ ê¸°ë³¸ ëª¨ë¸ í´ë˜ìŠ¤(ì˜ˆ: <code>OPTForCausalLM</code> ë˜ëŠ” <code>LlamaForCausalLM</code>) ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ì—¬ PEFT ì–´ëŒ‘í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";return{c(){i=p("p"),i.innerHTML=y},l(c){i=o(c,"P",{"data-svelte-h":!0}),u(i)!=="svelte-6og35c"&&(i.innerHTML=y)},m(c,T){a(c,i,T)},p:xt,d(c){c&&l(i)}}}function At(ue){let i,y='<code>Trainer</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë¸ì„ ë¯¸ì„¸ ì¡°ì •í•˜ëŠ” ê²ƒì´ ìµìˆ™í•˜ì§€ ì•Šë‹¤ë©´ <a href="training">ì‚¬ì „í›ˆë ¨ëœ ëª¨ë¸ì„ ë¯¸ì„¸ ì¡°ì •í•˜ê¸°</a> íŠœí† ë¦¬ì–¼ì„ í™•ì¸í•˜ì„¸ìš”.';return{c(){i=p("p"),i.innerHTML=y},l(c){i=o(c,"P",{"data-svelte-h":!0}),u(i)!=="svelte-cztuzc"&&(i.innerHTML=y)},m(c,T){a(c,i,T)},p:xt,d(c){c&&l(i)}}}function St(ue){let i,y,c,T,_,ye,k,Te,U,Mt='<a href="https://huggingface.co/blog/peft" rel="nofollow">Parameter-Efficient Fine Tuning (PEFT)</a> ë°©ë²•ì€ ì‚¬ì „í›ˆë ¨ëœ ëª¨ë¸ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë¯¸ì„¸ ì¡°ì • ì¤‘ ê³ ì •ì‹œí‚¤ê³ , ê·¸ ìœ„ì— í›ˆë ¨í•  ìˆ˜ ìˆëŠ” ë§¤ìš° ì ì€ ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜(ì–´ëŒ‘í„°)ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì–´ëŒ‘í„°ëŠ” ì‘ì—…ë³„ ì •ë³´ë¥¼ í•™ìŠµí•˜ë„ë¡ í›ˆë ¨ë©ë‹ˆë‹¤. ì´ ì ‘ê·¼ ë°©ì‹ì€ ì™„ì „íˆ ë¯¸ì„¸ ì¡°ì •ëœ ëª¨ë¸ì— í•„ì í•˜ëŠ” ê²°ê³¼ë¥¼ ìƒì„±í•˜ë©´ì„œ, ë©”ëª¨ë¦¬ íš¨ìœ¨ì ì´ê³  ë¹„êµì  ì ì€ ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.',we,F,bt="ë˜í•œ PEFTë¡œ í›ˆë ¨ëœ ì–´ëŒ‘í„°ëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì „ì²´ ëª¨ë¸ë³´ë‹¤ í›¨ì”¬ ì‘ê¸° ë•Œë¬¸ì— ê³µìœ , ì €ì¥ ë° ê°€ì ¸ì˜¤ê¸°ê°€ í¸ë¦¬í•©ë‹ˆë‹¤.",he,w,ut='<img src="https://huggingface.co/datasets/huggingface/documentation-images/resolve/main/peft/PEFT-hub-screenshot.png"/> <figcaption class="text-center">Hubì— ì €ì¥ëœ OPTForCausalLM ëª¨ë¸ì˜ ì–´ëŒ‘í„° ê°€ì¤‘ì¹˜ëŠ” ìµœëŒ€ 700MBì— ë‹¬í•˜ëŠ” ëª¨ë¸ ê°€ì¤‘ì¹˜ì˜ ì „ì²´ í¬ê¸°ì— ë¹„í•´ ì•½ 6MBì— ë¶ˆê³¼í•©ë‹ˆë‹¤.</figcaption>',ge,v,ct='ğŸ¤— PEFT ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ë ¤ë©´ <a href="https://huggingface.co/docs/peft/index" rel="nofollow">ë¬¸ì„œ</a>ë¥¼ í™•ì¸í•˜ì„¸ìš”.',Je,W,Ce,j,$t="ğŸ¤— PEFTë¥¼ ì„¤ì¹˜í•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”:",Ze,B,_e,R,yt="ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ë³´ê³  ì‹¶ë‹¤ë©´, ë‹¤ìŒ ì†ŒìŠ¤ì—ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤:",ke,V,Ue,G,Fe,H,Tt="ğŸ¤— TransformersëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì¼ë¶€ PEFT ë°©ë²•ì„ ì§€ì›í•˜ë©°, ë¡œì»¬ì´ë‚˜ Hubì— ì €ì¥ëœ ì–´ëŒ‘í„° ê°€ì¤‘ì¹˜ë¥¼ ê°€ì ¸ì˜¤ê³  ëª‡ ì¤„ì˜ ì½”ë“œë§Œìœ¼ë¡œ ì‰½ê²Œ ì‹¤í–‰í•˜ê±°ë‚˜ í›ˆë ¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒ ë°©ë²•ì„ ì§€ì›í•©ë‹ˆë‹¤:",ve,X,wt='<li><a href="https://huggingface.co/docs/peft/conceptual_guides/lora" rel="nofollow">Low Rank Adapters</a></li> <li><a href="https://huggingface.co/docs/peft/conceptual_guides/ia3" rel="nofollow">IA3</a></li> <li><a href="https://arxiv.org/abs/2303.10512" rel="nofollow">AdaLoRA</a></li>',We,E,ht='ğŸ¤— PEFTì™€ ê´€ë ¨ëœ ë‹¤ë¥¸ ë°©ë²•(ì˜ˆ: í”„ë¡¬í”„íŠ¸ í›ˆë ¨ ë˜ëŠ” í”„ë¡¬í”„íŠ¸ íŠœë‹) ë˜ëŠ” ì¼ë°˜ì ì¸ ğŸ¤— PEFT ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•´ ìì„¸íˆ ì•Œì•„ë³´ë ¤ë©´ <a href="https://huggingface.co/docs/peft/index" rel="nofollow">ë¬¸ì„œ</a>ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.',je,x,Be,Q,gt="ğŸ¤— Transformersì—ì„œ PEFT ì–´ëŒ‘í„° ëª¨ë¸ì„ ê°€ì ¸ì˜¤ê³  ì‚¬ìš©í•˜ë ¤ë©´ Hub ì €ì¥ì†Œë‚˜ ë¡œì»¬ ë””ë ‰í„°ë¦¬ì— <code>adapter_config.json</code> íŒŒì¼ê³¼ ì–´ëŒ‘í„° ê°€ì¤‘ì¹˜ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤. ê·¸ëŸ° ë‹¤ìŒ <code>AutoModelFor</code> í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ PEFT ì–´ëŒ‘í„° ëª¨ë¸ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì¸ê³¼ ê´€ê³„ ì–¸ì–´ ëª¨ë¸ìš© PEFT ì–´ëŒ‘í„° ëª¨ë¸ì„ ê°€ì ¸ì˜¤ë ¤ë©´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ë”°ë¥´ì‹­ì‹œì˜¤:",Re,L,Jt="<li>PEFT ëª¨ë¸ IDë¥¼ ì§€ì •í•˜ì‹­ì‹œì˜¤.</li> <li><code>AutoModelForCausalLM</code> í´ë˜ìŠ¤ì— ì „ë‹¬í•˜ì‹­ì‹œì˜¤.</li>",Ve,I,Ge,h,He,N,Ct="<code>load_adapter</code> ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ PEFT ì–´ëŒ‘í„°ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.",Xe,z,Ee,P,xe,Y,Zt="<code>bitsandbytes</code> í†µí•©ì€ 8ë¹„íŠ¸ì™€ 4ë¹„íŠ¸ ì •ë°€ë„ ë°ì´í„° ìœ í˜•ì„ ì§€ì›í•˜ë¯€ë¡œ í° ëª¨ë¸ì„ ê°€ì ¸ì˜¬ ë•Œ ìœ ìš©í•˜ë©´ì„œ ë©”ëª¨ë¦¬ë„ ì ˆì•½í•©ë‹ˆë‹¤. ëª¨ë¸ì„ í•˜ë“œì›¨ì–´ì— íš¨ê³¼ì ìœ¼ë¡œ ë¶„ë°°í•˜ë ¤ë©´ <code>from_pretrained()</code>ì— <code>load_in_8bit</code> ë˜ëŠ” <code>load_in_4bit</code> ë§¤ê°œë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ê³  <code>device_map=&quot;auto&quot;</code>ë¥¼ ì„¤ì •í•˜ì„¸ìš”:",Qe,q,Le,A,Ie,S,_t="ìƒˆ ì–´ëŒ‘í„°ê°€ í˜„ì¬ ì–´ëŒ‘í„°ì™€ ë™ì¼í•œ ìœ í˜•ì¸ ê²½ìš°ì— í•œí•´ ê¸°ì¡´ ì–´ëŒ‘í„°ê°€ ìˆëŠ” ëª¨ë¸ì— ìƒˆ ì–´ëŒ‘í„°ë¥¼ ì¶”ê°€í•˜ë ¤ë©´ <code>~peft.PeftModel.add_adapter</code>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ëª¨ë¸ì— ê¸°ì¡´ LoRA ì–´ëŒ‘í„°ê°€ ì—°ê²°ë˜ì–´ ìˆëŠ” ê²½ìš°:",Ne,K,ze,D,kt="ìƒˆ ì–´ëŒ‘í„°ë¥¼ ì¶”ê°€í•˜ë ¤ë©´:",Pe,O,Ye,ee,Ut="ì´ì œ <code>~peft.PeftModel.set_adapter</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ì–´ëŒ‘í„°ë¥¼ ì‚¬ìš©í•  ì–´ëŒ‘í„°ë¡œ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:",qe,te,Ae,le,Se,ae,Ft="ëª¨ë¸ì— ì–´ëŒ‘í„°ë¥¼ ì¶”ê°€í•œ í›„ ì–´ëŒ‘í„° ëª¨ë“ˆì„ í™œì„±í™” ë˜ëŠ” ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–´ëŒ‘í„° ëª¨ë“ˆì„ í™œì„±í™”í•˜ë ¤ë©´:",Ke,se,De,ne,vt="ì–´ëŒ‘í„° ëª¨ë“ˆì„ ë¹„í™œì„±í™”í•˜ë ¤ë©´:",Oe,pe,et,oe,tt,ie,Wt="PEFT ì–´ëŒ‘í„°ëŠ” <code>Trainer</code> í´ë˜ìŠ¤ì—ì„œ ì§€ì›ë˜ë¯€ë¡œ íŠ¹ì • ì‚¬ìš© ì‚¬ë¡€ì— ë§ê²Œ ì–´ëŒ‘í„°ë¥¼ í›ˆë ¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª‡ ì¤„ì˜ ì½”ë“œë¥¼ ì¶”ê°€í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ LoRA ì–´ëŒ‘í„°ë¥¼ í›ˆë ¨í•˜ë ¤ë©´:",lt,g,at,me,jt="<li>ì‘ì—… ìœ í˜• ë° í•˜ì´í¼íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì •í•˜ì—¬ ì–´ëŒ‘í„° êµ¬ì„±ì„ ì •ì˜í•©ë‹ˆë‹¤. í•˜ì´í¼íŒŒë¼ë¯¸í„°ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ <code>~peft.LoraConfig</code>ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.</li>",st,re,nt,J,Bt="<li>ëª¨ë¸ì— ì–´ëŒ‘í„°ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.</li>",pt,de,ot,C,Rt="<li>ì´ì œ ëª¨ë¸ì„ <code>Trainer</code>ì— ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</li>",it,fe,mt,Me,Vt="í›ˆë ¨í•œ ì–´ëŒ‘í„°ë¥¼ ì €ì¥í•˜ê³  ë‹¤ì‹œ ê°€ì ¸ì˜¤ë ¤ë©´:",rt,be,dt,ce,ft;return _=new Z({props:{title:"ğŸ¤— PEFTë¡œ ì–´ëŒ‘í„° ê°€ì ¸ì˜¤ê¸°",local:"load-adapters-with-peft",headingTag:"h1"}}),k=new Yt({props:{classNames:"absolute z-10 right-0 top-0",options:[{label:"Mixed",value:"https://colab.research.google.com/github/huggingface/notebooks/blob/main/transformers_doc/ko/peft.ipynb"},{label:"PyTorch",value:"https://colab.research.google.com/github/huggingface/notebooks/blob/main/transformers_doc/ko/pytorch/peft.ipynb"},{label:"TensorFlow",value:"https://colab.research.google.com/github/huggingface/notebooks/blob/main/transformers_doc/ko/tensorflow/peft.ipynb"},{label:"Mixed",value:"https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/main/transformers_doc/ko/peft.ipynb"},{label:"PyTorch",value:"https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/main/transformers_doc/ko/pytorch/peft.ipynb"},{label:"TensorFlow",value:"https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/main/transformers_doc/ko/tensorflow/peft.ipynb"}]}}),W=new Z({props:{title:"ì„¤ì •",local:"setup",headingTag:"h2"}}),B=new $({props:{code:"cGlwJTIwaW5zdGFsbCUyMHBlZnQ=",highlighted:"pip install peft",wrap:!1}}),V=new $({props:{code:"cGlwJTIwaW5zdGFsbCUyMGdpdCUyQmh0dHBzJTNBJTJGJTJGZ2l0aHViLmNvbSUyRmh1Z2dpbmdmYWNlJTJGcGVmdC5naXQ=",highlighted:"pip install git+https://github.com/huggingface/peft.git",wrap:!1}}),G=new Z({props:{title:"ì§€ì›ë˜ëŠ” PEFT ëª¨ë¸",local:"supported-peft-models",headingTag:"h2"}}),x=new Z({props:{title:"PEFT ì–´ëŒ‘í„° ê°€ì ¸ì˜¤ê¸°",local:"load-a-peft-adapter",headingTag:"h2"}}),I=new $({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Nb2RlbEZvckNhdXNhbExNJTJDJTIwQXV0b1Rva2VuaXplciUwQSUwQXBlZnRfbW9kZWxfaWQlMjAlM0QlMjAlMjJ5YmVsa2FkYSUyRm9wdC0zNTBtLWxvcmElMjIlMEFtb2RlbCUyMCUzRCUyMEF1dG9Nb2RlbEZvckNhdXNhbExNLmZyb21fcHJldHJhaW5lZChwZWZ0X21vZGVsX2lkKQ==",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForCausalLM, AutoTokenizer

peft_model_id = <span class="hljs-string">&quot;ybelkada/opt-350m-lora&quot;</span>
model = AutoModelForCausalLM.from_pretrained(peft_model_id)`,wrap:!1}}),h=new Et({props:{$$slots:{default:[qt]},$$scope:{ctx:ue}}}),z=new $({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Nb2RlbEZvckNhdXNhbExNJTJDJTIwQXV0b1Rva2VuaXplciUwQSUwQW1vZGVsX2lkJTIwJTNEJTIwJTIyZmFjZWJvb2slMkZvcHQtMzUwbSUyMiUwQXBlZnRfbW9kZWxfaWQlMjAlM0QlMjAlMjJ5YmVsa2FkYSUyRm9wdC0zNTBtLWxvcmElMjIlMEElMEFtb2RlbCUyMCUzRCUyMEF1dG9Nb2RlbEZvckNhdXNhbExNLmZyb21fcHJldHJhaW5lZChtb2RlbF9pZCklMEFtb2RlbC5sb2FkX2FkYXB0ZXIocGVmdF9tb2RlbF9pZCk=",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForCausalLM, AutoTokenizer

model_id = <span class="hljs-string">&quot;facebook/opt-350m&quot;</span>
peft_model_id = <span class="hljs-string">&quot;ybelkada/opt-350m-lora&quot;</span>

model = AutoModelForCausalLM.from_pretrained(model_id)
model.load_adapter(peft_model_id)`,wrap:!1}}),P=new Z({props:{title:"8ë¹„íŠ¸ ë˜ëŠ” 4ë¹„íŠ¸ë¡œ ê°€ì ¸ì˜¤ê¸°",local:"load-in-8bit-or-4bit",headingTag:"h2"}}),q=new $({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Nb2RlbEZvckNhdXNhbExNJTJDJTIwQXV0b1Rva2VuaXplciUwQSUwQXBlZnRfbW9kZWxfaWQlMjAlM0QlMjAlMjJ5YmVsa2FkYSUyRm9wdC0zNTBtLWxvcmElMjIlMEFtb2RlbCUyMCUzRCUyMEF1dG9Nb2RlbEZvckNhdXNhbExNLmZyb21fcHJldHJhaW5lZChwZWZ0X21vZGVsX2lkJTJDJTIwZGV2aWNlX21hcCUzRCUyMmF1dG8lMjIlMkMlMjBsb2FkX2luXzhiaXQlM0RUcnVlKQ==",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForCausalLM, AutoTokenizer

peft_model_id = <span class="hljs-string">&quot;ybelkada/opt-350m-lora&quot;</span>
model = AutoModelForCausalLM.from_pretrained(peft_model_id, device_map=<span class="hljs-string">&quot;auto&quot;</span>, load_in_8bit=<span class="hljs-literal">True</span>)`,wrap:!1}}),A=new Z({props:{title:"ìƒˆ ì–´ëŒ‘í„° ì¶”ê°€",local:"add-a-new-adapter",headingTag:"h2"}}),K=new $({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Nb2RlbEZvckNhdXNhbExNJTJDJTIwT1BURm9yQ2F1c2FsTE0lMkMlMjBBdXRvVG9rZW5pemVyJTBBZnJvbSUyMHBlZnQlMjBpbXBvcnQlMjBQZWZ0Q29uZmlnJTBBJTBBbW9kZWxfaWQlMjAlM0QlMjAlMjJmYWNlYm9vayUyRm9wdC0zNTBtJTIyJTBBbW9kZWwlMjAlM0QlMjBBdXRvTW9kZWxGb3JDYXVzYWxMTS5mcm9tX3ByZXRyYWluZWQobW9kZWxfaWQpJTBBJTBBbG9yYV9jb25maWclMjAlM0QlMjBMb3JhQ29uZmlnKCUwQSUyMCUyMCUyMCUyMHRhcmdldF9tb2R1bGVzJTNEJTVCJTIycV9wcm9qJTIyJTJDJTIwJTIya19wcm9qJTIyJTVEJTJDJTBBJTIwJTIwJTIwJTIwaW5pdF9sb3JhX3dlaWdodHMlM0RGYWxzZSUwQSklMEElMEFtb2RlbC5hZGRfYWRhcHRlcihsb3JhX2NvbmZpZyUyQyUyMGFkYXB0ZXJfbmFtZSUzRCUyMmFkYXB0ZXJfMSUyMik=",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForCausalLM, OPTForCausalLM, AutoTokenizer
<span class="hljs-keyword">from</span> peft <span class="hljs-keyword">import</span> PeftConfig

model_id = <span class="hljs-string">&quot;facebook/opt-350m&quot;</span>
model = AutoModelForCausalLM.from_pretrained(model_id)

lora_config = LoraConfig(
    target_modules=[<span class="hljs-string">&quot;q_proj&quot;</span>, <span class="hljs-string">&quot;k_proj&quot;</span>],
    init_lora_weights=<span class="hljs-literal">False</span>
)

model.add_adapter(lora_config, adapter_name=<span class="hljs-string">&quot;adapter_1&quot;</span>)`,wrap:!1}}),O=new $({props:{code:"JTIzJTIwYXR0YWNoJTIwbmV3JTIwYWRhcHRlciUyMHdpdGglMjBzYW1lJTIwY29uZmlnJTBBbW9kZWwuYWRkX2FkYXB0ZXIobG9yYV9jb25maWclMkMlMjBhZGFwdGVyX25hbWUlM0QlMjJhZGFwdGVyXzIlMjIp",highlighted:`<span class="hljs-comment"># attach new adapter with same config</span>
model.add_adapter(lora_config, adapter_name=<span class="hljs-string">&quot;adapter_2&quot;</span>)`,wrap:!1}}),te=new $({props:{code:"JTIzJTIwdXNlJTIwYWRhcHRlcl8xJTBBbW9kZWwuc2V0X2FkYXB0ZXIoJTIyYWRhcHRlcl8xJTIyKSUwQW91dHB1dCUyMCUzRCUyMG1vZGVsLmdlbmVyYXRlKCoqaW5wdXRzKSUwQXByaW50KHRva2VuaXplci5kZWNvZGUob3V0cHV0X2Rpc2FibGVkJTVCMCU1RCUyQyUyMHNraXBfc3BlY2lhbF90b2tlbnMlM0RUcnVlKSklMEElMEElMjMlMjB1c2UlMjBhZGFwdGVyXzIlMEFtb2RlbC5zZXRfYWRhcHRlciglMjJhZGFwdGVyXzIlMjIpJTBBb3V0cHV0X2VuYWJsZWQlMjAlM0QlMjBtb2RlbC5nZW5lcmF0ZSgqKmlucHV0cyklMEFwcmludCh0b2tlbml6ZXIuZGVjb2RlKG91dHB1dF9lbmFibGVkJTVCMCU1RCUyQyUyMHNraXBfc3BlY2lhbF90b2tlbnMlM0RUcnVlKSk=",highlighted:`<span class="hljs-comment"># use adapter_1</span>
model.set_adapter(<span class="hljs-string">&quot;adapter_1&quot;</span>)
output = model.generate(**inputs)
<span class="hljs-built_in">print</span>(tokenizer.decode(output_disabled[<span class="hljs-number">0</span>], skip_special_tokens=<span class="hljs-literal">True</span>))

<span class="hljs-comment"># use adapter_2</span>
model.set_adapter(<span class="hljs-string">&quot;adapter_2&quot;</span>)
output_enabled = model.generate(**inputs)
<span class="hljs-built_in">print</span>(tokenizer.decode(output_enabled[<span class="hljs-number">0</span>], skip_special_tokens=<span class="hljs-literal">True</span>))`,wrap:!1}}),le=new Z({props:{title:"ì–´ëŒ‘í„° í™œì„±í™” ë° ë¹„í™œì„±í™”",local:"enable-and-disable-adapters",headingTag:"h2"}}),se=new $({props:{code:"ZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Nb2RlbEZvckNhdXNhbExNJTJDJTIwT1BURm9yQ2F1c2FsTE0lMkMlMjBBdXRvVG9rZW5pemVyJTBBZnJvbSUyMHBlZnQlMjBpbXBvcnQlMjBQZWZ0Q29uZmlnJTBBJTBBbW9kZWxfaWQlMjAlM0QlMjAlMjJmYWNlYm9vayUyRm9wdC0zNTBtJTIyJTBBYWRhcHRlcl9tb2RlbF9pZCUyMCUzRCUyMCUyMnliZWxrYWRhJTJGb3B0LTM1MG0tbG9yYSUyMiUwQXRva2VuaXplciUyMCUzRCUyMEF1dG9Ub2tlbml6ZXIuZnJvbV9wcmV0cmFpbmVkKG1vZGVsX2lkKSUwQXRleHQlMjAlM0QlMjAlMjJIZWxsbyUyMiUwQWlucHV0cyUyMCUzRCUyMHRva2VuaXplcih0ZXh0JTJDJTIwcmV0dXJuX3RlbnNvcnMlM0QlMjJwdCUyMiklMEElMEFtb2RlbCUyMCUzRCUyMEF1dG9Nb2RlbEZvckNhdXNhbExNLmZyb21fcHJldHJhaW5lZChtb2RlbF9pZCklMEFwZWZ0X2NvbmZpZyUyMCUzRCUyMFBlZnRDb25maWcuZnJvbV9wcmV0cmFpbmVkKGFkYXB0ZXJfbW9kZWxfaWQpJTBBJTBBJTIzJTIwdG8lMjBpbml0aWF0ZSUyMHdpdGglMjByYW5kb20lMjB3ZWlnaHRzJTBBcGVmdF9jb25maWcuaW5pdF9sb3JhX3dlaWdodHMlMjAlM0QlMjBGYWxzZSUwQSUwQW1vZGVsLmFkZF9hZGFwdGVyKHBlZnRfY29uZmlnKSUwQW1vZGVsLmVuYWJsZV9hZGFwdGVycygpJTBBb3V0cHV0JTIwJTNEJTIwbW9kZWwuZ2VuZXJhdGUoKippbnB1dHMp",highlighted:`<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoModelForCausalLM, OPTForCausalLM, AutoTokenizer
<span class="hljs-keyword">from</span> peft <span class="hljs-keyword">import</span> PeftConfig

model_id = <span class="hljs-string">&quot;facebook/opt-350m&quot;</span>
adapter_model_id = <span class="hljs-string">&quot;ybelkada/opt-350m-lora&quot;</span>
tokenizer = AutoTokenizer.from_pretrained(model_id)
text = <span class="hljs-string">&quot;Hello&quot;</span>
inputs = tokenizer(text, return_tensors=<span class="hljs-string">&quot;pt&quot;</span>)

model = AutoModelForCausalLM.from_pretrained(model_id)
peft_config = PeftConfig.from_pretrained(adapter_model_id)

<span class="hljs-comment"># to initiate with random weights</span>
peft_config.init_lora_weights = <span class="hljs-literal">False</span>

model.add_adapter(peft_config)
model.enable_adapters()
output = model.generate(**inputs)`,wrap:!1}}),pe=new $({props:{code:"bW9kZWwuZGlzYWJsZV9hZGFwdGVycygpJTBBb3V0cHV0JTIwJTNEJTIwbW9kZWwuZ2VuZXJhdGUoKippbnB1dHMp",highlighted:`model.disable_adapters()
output = model.generate(**inputs)`,wrap:!1}}),oe=new Z({props:{title:"PEFT ì–´ëŒ‘í„° í›ˆë ¨",local:"train-a-peft-adapter",headingTag:"h2"}}),g=new Et({props:{$$slots:{default:[At]},$$scope:{ctx:ue}}}),re=new $({props:{code:"ZnJvbSUyMHBlZnQlMjBpbXBvcnQlMjBMb3JhQ29uZmlnJTBBJTBBcGVmdF9jb25maWclMjAlM0QlMjBMb3JhQ29uZmlnKCUwQSUyMCUyMCUyMCUyMGxvcmFfYWxwaGElM0QxNiUyQyUwQSUyMCUyMCUyMCUyMGxvcmFfZHJvcG91dCUzRDAuMSUyQyUwQSUyMCUyMCUyMCUyMHIlM0Q2NCUyQyUwQSUyMCUyMCUyMCUyMGJpYXMlM0QlMjJub25lJTIyJTJDJTBBJTIwJTIwJTIwJTIwdGFza190eXBlJTNEJTIyQ0FVU0FMX0xNJTIyJTJDJTBBKQ==",highlighted:`<span class="hljs-keyword">from</span> peft <span class="hljs-keyword">import</span> LoraConfig

peft_config = LoraConfig(
    lora_alpha=<span class="hljs-number">16</span>,
    lora_dropout=<span class="hljs-number">0.1</span>,
    r=<span class="hljs-number">64</span>,
    bias=<span class="hljs-string">&quot;none&quot;</span>,
    task_type=<span class="hljs-string">&quot;CAUSAL_LM&quot;</span>,
)`,wrap:!1}}),de=new $({props:{code:"bW9kZWwuYWRkX2FkYXB0ZXIocGVmdF9jb25maWcp",highlighted:"model.add_adapter(peft_config)",wrap:!1}}),fe=new $({props:{code:"dHJhaW5lciUyMCUzRCUyMFRyYWluZXIobW9kZWwlM0Rtb2RlbCUyQyUyMC4uLiklMEF0cmFpbmVyLnRyYWluKCk=",highlighted:`trainer = Trainer(model=model, ...)
trainer.train()`,wrap:!1}}),be=new $({props:{code:"bW9kZWwuc2F2ZV9wcmV0cmFpbmVkKHNhdmVfZGlyKSUwQW1vZGVsJTIwJTNEJTIwQXV0b01vZGVsRm9yQ2F1c2FsTE0uZnJvbV9wcmV0cmFpbmVkKHNhdmVfZGlyKQ==",highlighted:`model.save_pretrained(save_dir)
model = AutoModelForCausalLM.from_pretrained(save_dir)`,wrap:!1}}),{c(){i=p("meta"),y=s(),c=p("p"),T=s(),m(_.$$.fragment),ye=s(),m(k.$$.fragment),Te=s(),U=p("p"),U.innerHTML=Mt,we=s(),F=p("p"),F.textContent=bt,he=s(),w=p("div"),w.innerHTML=ut,ge=s(),v=p("p"),v.innerHTML=ct,Je=s(),m(W.$$.fragment),Ce=s(),j=p("p"),j.textContent=$t,Ze=s(),m(B.$$.fragment),_e=s(),R=p("p"),R.textContent=yt,ke=s(),m(V.$$.fragment),Ue=s(),m(G.$$.fragment),Fe=s(),H=p("p"),H.textContent=Tt,ve=s(),X=p("ul"),X.innerHTML=wt,We=s(),E=p("p"),E.innerHTML=ht,je=s(),m(x.$$.fragment),Be=s(),Q=p("p"),Q.innerHTML=gt,Re=s(),L=p("ol"),L.innerHTML=Jt,Ve=s(),m(I.$$.fragment),Ge=s(),m(h.$$.fragment),He=s(),N=p("p"),N.innerHTML=Ct,Xe=s(),m(z.$$.fragment),Ee=s(),m(P.$$.fragment),xe=s(),Y=p("p"),Y.innerHTML=Zt,Qe=s(),m(q.$$.fragment),Le=s(),m(A.$$.fragment),Ie=s(),S=p("p"),S.innerHTML=_t,Ne=s(),m(K.$$.fragment),ze=s(),D=p("p"),D.textContent=kt,Pe=s(),m(O.$$.fragment),Ye=s(),ee=p("p"),ee.innerHTML=Ut,qe=s(),m(te.$$.fragment),Ae=s(),m(le.$$.fragment),Se=s(),ae=p("p"),ae.textContent=Ft,Ke=s(),m(se.$$.fragment),De=s(),ne=p("p"),ne.textContent=vt,Oe=s(),m(pe.$$.fragment),et=s(),m(oe.$$.fragment),tt=s(),ie=p("p"),ie.innerHTML=Wt,lt=s(),m(g.$$.fragment),at=s(),me=p("ol"),me.innerHTML=jt,st=s(),m(re.$$.fragment),nt=s(),J=p("ol"),J.innerHTML=Bt,pt=s(),m(de.$$.fragment),ot=s(),C=p("ol"),C.innerHTML=Rt,it=s(),m(fe.$$.fragment),mt=s(),Me=p("p"),Me.textContent=Vt,rt=s(),m(be.$$.fragment),dt=s(),ce=p("p"),this.h()},l(e){const t=zt("svelte-u9bgzb",document.head);i=o(t,"META",{name:!0,content:!0}),t.forEach(l),y=n(e),c=o(e,"P",{}),Xt(c).forEach(l),T=n(e),r(_.$$.fragment,e),ye=n(e),r(k.$$.fragment,e),Te=n(e),U=o(e,"P",{"data-svelte-h":!0}),u(U)!=="svelte-1w14gmp"&&(U.innerHTML=Mt),we=n(e),F=o(e,"P",{"data-svelte-h":!0}),u(F)!=="svelte-1egyvd6"&&(F.textContent=bt),he=n(e),w=o(e,"DIV",{class:!0,"data-svelte-h":!0}),u(w)!=="svelte-lbsdqs"&&(w.innerHTML=ut),ge=n(e),v=o(e,"P",{"data-svelte-h":!0}),u(v)!=="svelte-ntqcp0"&&(v.innerHTML=ct),Je=n(e),r(W.$$.fragment,e),Ce=n(e),j=o(e,"P",{"data-svelte-h":!0}),u(j)!=="svelte-1dyh7mj"&&(j.textContent=$t),Ze=n(e),r(B.$$.fragment,e),_e=n(e),R=o(e,"P",{"data-svelte-h":!0}),u(R)!=="svelte-zhta27"&&(R.textContent=yt),ke=n(e),r(V.$$.fragment,e),Ue=n(e),r(G.$$.fragment,e),Fe=n(e),H=o(e,"P",{"data-svelte-h":!0}),u(H)!=="svelte-16zqgos"&&(H.textContent=Tt),ve=n(e),X=o(e,"UL",{"data-svelte-h":!0}),u(X)!=="svelte-1ulyaf4"&&(X.innerHTML=wt),We=n(e),E=o(e,"P",{"data-svelte-h":!0}),u(E)!=="svelte-gn3g26"&&(E.innerHTML=ht),je=n(e),r(x.$$.fragment,e),Be=n(e),Q=o(e,"P",{"data-svelte-h":!0}),u(Q)!=="svelte-1y92spc"&&(Q.innerHTML=gt),Re=n(e),L=o(e,"OL",{"data-svelte-h":!0}),u(L)!=="svelte-1nf1sfv"&&(L.innerHTML=Jt),Ve=n(e),r(I.$$.fragment,e),Ge=n(e),r(h.$$.fragment,e),He=n(e),N=o(e,"P",{"data-svelte-h":!0}),u(N)!=="svelte-12tkwt4"&&(N.innerHTML=Ct),Xe=n(e),r(z.$$.fragment,e),Ee=n(e),r(P.$$.fragment,e),xe=n(e),Y=o(e,"P",{"data-svelte-h":!0}),u(Y)!=="svelte-61ehyz"&&(Y.innerHTML=Zt),Qe=n(e),r(q.$$.fragment,e),Le=n(e),r(A.$$.fragment,e),Ie=n(e),S=o(e,"P",{"data-svelte-h":!0}),u(S)!=="svelte-1ioi920"&&(S.innerHTML=_t),Ne=n(e),r(K.$$.fragment,e),ze=n(e),D=o(e,"P",{"data-svelte-h":!0}),u(D)!=="svelte-146ss7n"&&(D.textContent=kt),Pe=n(e),r(O.$$.fragment,e),Ye=n(e),ee=o(e,"P",{"data-svelte-h":!0}),u(ee)!=="svelte-khb66g"&&(ee.innerHTML=Ut),qe=n(e),r(te.$$.fragment,e),Ae=n(e),r(le.$$.fragment,e),Se=n(e),ae=o(e,"P",{"data-svelte-h":!0}),u(ae)!=="svelte-mk5gbz"&&(ae.textContent=Ft),Ke=n(e),r(se.$$.fragment,e),De=n(e),ne=o(e,"P",{"data-svelte-h":!0}),u(ne)!=="svelte-1jw0rbw"&&(ne.textContent=vt),Oe=n(e),r(pe.$$.fragment,e),et=n(e),r(oe.$$.fragment,e),tt=n(e),ie=o(e,"P",{"data-svelte-h":!0}),u(ie)!=="svelte-bpy72o"&&(ie.innerHTML=Wt),lt=n(e),r(g.$$.fragment,e),at=n(e),me=o(e,"OL",{"data-svelte-h":!0}),u(me)!=="svelte-b0kvsd"&&(me.innerHTML=jt),st=n(e),r(re.$$.fragment,e),nt=n(e),J=o(e,"OL",{start:!0,"data-svelte-h":!0}),u(J)!=="svelte-fljuq6"&&(J.innerHTML=Bt),pt=n(e),r(de.$$.fragment,e),ot=n(e),C=o(e,"OL",{start:!0,"data-svelte-h":!0}),u(C)!=="svelte-1wi5l7b"&&(C.innerHTML=Rt),it=n(e),r(fe.$$.fragment,e),mt=n(e),Me=o(e,"P",{"data-svelte-h":!0}),u(Me)!=="svelte-znwbxw"&&(Me.textContent=Vt),rt=n(e),r(be.$$.fragment,e),dt=n(e),ce=o(e,"P",{}),Xt(ce).forEach(l),this.h()},h(){$e(i,"name","hf:doc:metadata"),$e(i,"content",Kt),$e(w,"class","flex flex-col justify-center"),$e(J,"start","2"),$e(C,"start","3")},m(e,t){Pt(document.head,i),a(e,y,t),a(e,c,t),a(e,T,t),d(_,e,t),a(e,ye,t),d(k,e,t),a(e,Te,t),a(e,U,t),a(e,we,t),a(e,F,t),a(e,he,t),a(e,w,t),a(e,ge,t),a(e,v,t),a(e,Je,t),d(W,e,t),a(e,Ce,t),a(e,j,t),a(e,Ze,t),d(B,e,t),a(e,_e,t),a(e,R,t),a(e,ke,t),d(V,e,t),a(e,Ue,t),d(G,e,t),a(e,Fe,t),a(e,H,t),a(e,ve,t),a(e,X,t),a(e,We,t),a(e,E,t),a(e,je,t),d(x,e,t),a(e,Be,t),a(e,Q,t),a(e,Re,t),a(e,L,t),a(e,Ve,t),d(I,e,t),a(e,Ge,t),d(h,e,t),a(e,He,t),a(e,N,t),a(e,Xe,t),d(z,e,t),a(e,Ee,t),d(P,e,t),a(e,xe,t),a(e,Y,t),a(e,Qe,t),d(q,e,t),a(e,Le,t),d(A,e,t),a(e,Ie,t),a(e,S,t),a(e,Ne,t),d(K,e,t),a(e,ze,t),a(e,D,t),a(e,Pe,t),d(O,e,t),a(e,Ye,t),a(e,ee,t),a(e,qe,t),d(te,e,t),a(e,Ae,t),d(le,e,t),a(e,Se,t),a(e,ae,t),a(e,Ke,t),d(se,e,t),a(e,De,t),a(e,ne,t),a(e,Oe,t),d(pe,e,t),a(e,et,t),d(oe,e,t),a(e,tt,t),a(e,ie,t),a(e,lt,t),d(g,e,t),a(e,at,t),a(e,me,t),a(e,st,t),d(re,e,t),a(e,nt,t),a(e,J,t),a(e,pt,t),d(de,e,t),a(e,ot,t),a(e,C,t),a(e,it,t),d(fe,e,t),a(e,mt,t),a(e,Me,t),a(e,rt,t),d(be,e,t),a(e,dt,t),a(e,ce,t),ft=!0},p(e,[t]){const Gt={};t&2&&(Gt.$$scope={dirty:t,ctx:e}),h.$set(Gt);const Ht={};t&2&&(Ht.$$scope={dirty:t,ctx:e}),g.$set(Ht)},i(e){ft||(f(_.$$.fragment,e),f(k.$$.fragment,e),f(W.$$.fragment,e),f(B.$$.fragment,e),f(V.$$.fragment,e),f(G.$$.fragment,e),f(x.$$.fragment,e),f(I.$$.fragment,e),f(h.$$.fragment,e),f(z.$$.fragment,e),f(P.$$.fragment,e),f(q.$$.fragment,e),f(A.$$.fragment,e),f(K.$$.fragment,e),f(O.$$.fragment,e),f(te.$$.fragment,e),f(le.$$.fragment,e),f(se.$$.fragment,e),f(pe.$$.fragment,e),f(oe.$$.fragment,e),f(g.$$.fragment,e),f(re.$$.fragment,e),f(de.$$.fragment,e),f(fe.$$.fragment,e),f(be.$$.fragment,e),ft=!0)},o(e){M(_.$$.fragment,e),M(k.$$.fragment,e),M(W.$$.fragment,e),M(B.$$.fragment,e),M(V.$$.fragment,e),M(G.$$.fragment,e),M(x.$$.fragment,e),M(I.$$.fragment,e),M(h.$$.fragment,e),M(z.$$.fragment,e),M(P.$$.fragment,e),M(q.$$.fragment,e),M(A.$$.fragment,e),M(K.$$.fragment,e),M(O.$$.fragment,e),M(te.$$.fragment,e),M(le.$$.fragment,e),M(se.$$.fragment,e),M(pe.$$.fragment,e),M(oe.$$.fragment,e),M(g.$$.fragment,e),M(re.$$.fragment,e),M(de.$$.fragment,e),M(fe.$$.fragment,e),M(be.$$.fragment,e),ft=!1},d(e){e&&(l(y),l(c),l(T),l(ye),l(Te),l(U),l(we),l(F),l(he),l(w),l(ge),l(v),l(Je),l(Ce),l(j),l(Ze),l(_e),l(R),l(ke),l(Ue),l(Fe),l(H),l(ve),l(X),l(We),l(E),l(je),l(Be),l(Q),l(Re),l(L),l(Ve),l(Ge),l(He),l(N),l(Xe),l(Ee),l(xe),l(Y),l(Qe),l(Le),l(Ie),l(S),l(Ne),l(ze),l(D),l(Pe),l(Ye),l(ee),l(qe),l(Ae),l(Se),l(ae),l(Ke),l(De),l(ne),l(Oe),l(et),l(tt),l(ie),l(lt),l(at),l(me),l(st),l(nt),l(J),l(pt),l(ot),l(C),l(it),l(mt),l(Me),l(rt),l(dt),l(ce)),l(i),b(_,e),b(k,e),b(W,e),b(B,e),b(V,e),b(G,e),b(x,e),b(I,e),b(h,e),b(z,e),b(P,e),b(q,e),b(A,e),b(K,e),b(O,e),b(te,e),b(le,e),b(se,e),b(pe,e),b(oe,e),b(g,e),b(re,e),b(de,e),b(fe,e),b(be,e)}}}const Kt='{"title":"ğŸ¤— PEFTë¡œ ì–´ëŒ‘í„° ê°€ì ¸ì˜¤ê¸°","local":"load-adapters-with-peft","sections":[{"title":"ì„¤ì •","local":"setup","sections":[],"depth":2},{"title":"ì§€ì›ë˜ëŠ” PEFT ëª¨ë¸","local":"supported-peft-models","sections":[],"depth":2},{"title":"PEFT ì–´ëŒ‘í„° ê°€ì ¸ì˜¤ê¸°","local":"load-a-peft-adapter","sections":[],"depth":2},{"title":"8ë¹„íŠ¸ ë˜ëŠ” 4ë¹„íŠ¸ë¡œ ê°€ì ¸ì˜¤ê¸°","local":"load-in-8bit-or-4bit","sections":[],"depth":2},{"title":"ìƒˆ ì–´ëŒ‘í„° ì¶”ê°€","local":"add-a-new-adapter","sections":[],"depth":2},{"title":"ì–´ëŒ‘í„° í™œì„±í™” ë° ë¹„í™œì„±í™”","local":"enable-and-disable-adapters","sections":[],"depth":2},{"title":"PEFT ì–´ëŒ‘í„° í›ˆë ¨","local":"train-a-peft-adapter","sections":[],"depth":2}],"depth":1}';function Dt(ue){return Lt(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class nl extends It{constructor(i){super(),Nt(this,i,Dt,St,Qt,{})}}export{nl as component};
