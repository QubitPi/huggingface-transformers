import{s as ct,n as ut,o as ft}from"../chunks/scheduler.9991993c.js";import{S as dt,i as Mt,g as o,s as n,r as i,A as Tt,h as p,f as l,c as a,j as it,u as m,x as r,k as mt,y as yt,a as s,v as c,d as u,t as f,w as d}from"../chunks/index.7fc9a5e7.js";import{C as T}from"../chunks/CodeBlock.e11cba92.js";import{D as wt}from"../chunks/DocNotebookDropdown.a0cb4c0f.js";import{H as te}from"../chunks/Heading.e3de321f.js";function Jt(Le){let M,le,O,se,y,ne,w,ae,J,Ee='åŠ é€Ÿçº¿æ€§ä»£æ•°ï¼Œä¹Ÿç§°ä¸ºXLAï¼Œæ˜¯ä¸€ä¸ªç”¨äºåŠ é€ŸTensorFlowæ¨¡å‹è¿è¡Œæ—¶é—´çš„ç¼–è¯‘å™¨ã€‚ä»<a href="https://www.tensorflow.org/xla" rel="nofollow">å®˜æ–¹æ–‡æ¡£</a>ä¸­å¯ä»¥çœ‹åˆ°ï¼š',oe,b,Ye="XLAï¼ˆåŠ é€Ÿçº¿æ€§ä»£æ•°ï¼‰æ˜¯ä¸€ç§é’ˆå¯¹çº¿æ€§ä»£æ•°çš„ç‰¹å®šé¢†åŸŸç¼–è¯‘å™¨ï¼Œå¯ä»¥åœ¨å¯èƒ½ä¸éœ€è¦æ›´æ”¹æºä»£ç çš„æƒ…å†µä¸‹åŠ é€ŸTensorFlowæ¨¡å‹ã€‚",pe,h,He='åœ¨TensorFlowä¸­ä½¿ç”¨XLAéå¸¸ç®€å•â€”â€”å®ƒåŒ…å«åœ¨<code>tensorflow</code>åº“ä¸­ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ä»»ä½•å›¾åˆ›å»ºå‡½æ•°ä¸­çš„<code>jit_compile</code>å‚æ•°æ¥è§¦å‘ï¼Œä¾‹å¦‚<a href="https://www.tensorflow.org/guide/intro_to_graphs" rel="nofollow"><code>tf.function</code></a>ã€‚åœ¨ä½¿ç”¨Kerasæ–¹æ³•å¦‚<code>fit()</code>å’Œ<code>predict()</code>æ—¶ï¼Œåªéœ€å°†<code>jit_compile</code>å‚æ•°ä¼ é€’ç»™<code>model.compile()</code>å³å¯å¯ç”¨XLAã€‚ç„¶è€Œï¼ŒXLAä¸ä»…é™äºè¿™äº›æ–¹æ³• - å®ƒè¿˜å¯ä»¥ç”¨äºåŠ é€Ÿä»»ä½•ä»»æ„çš„<code>tf.function</code>ã€‚',re,U,Ne='åœ¨ğŸ¤— Transformersä¸­ï¼Œå‡ ä¸ªTensorFlowæ–¹æ³•å·²ç»è¢«é‡å†™ä¸ºä¸XLAå…¼å®¹ï¼ŒåŒ…æ‹¬<a href="https://huggingface.co/docs/transformers/model_doc/gpt2" rel="nofollow">GPT2</a>ã€<a href="https://huggingface.co/docs/transformers/model_doc/t5" rel="nofollow">T5</a>å’Œ<a href="https://huggingface.co/docs/transformers/model_doc/opt" rel="nofollow">OPT</a>ç­‰æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ï¼Œä»¥åŠ<a href="https://huggingface.co/docs/transformers/model_doc/whisper" rel="nofollow">Whisper</a>ç­‰è¯­éŸ³å¤„ç†æ¨¡å‹ã€‚',ie,g,Qe="è™½ç„¶ç¡®åˆ‡çš„åŠ é€Ÿå€æ•°å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºæ¨¡å‹ï¼Œä½†å¯¹äºğŸ¤— Transformersä¸­çš„TensorFlowæ–‡æœ¬ç”Ÿæˆæ¨¡å‹ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°é€Ÿåº¦æé«˜äº†çº¦100å€ã€‚æœ¬æ–‡æ¡£å°†è§£é‡Šå¦‚ä½•åœ¨è¿™äº›æ¨¡å‹ä¸Šä½¿ç”¨XLAè·å¾—æœ€å¤§çš„æ€§èƒ½ã€‚å¦‚æœæ‚¨æœ‰å…´è¶£äº†è§£æ›´å¤šå…³äºåŸºå‡†æµ‹è¯•å’Œæˆ‘ä»¬åœ¨XLAé›†æˆèƒŒåçš„è®¾è®¡å“²å­¦çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬è¿˜å°†æä¾›é¢å¤–çš„èµ„æºé“¾æ¥ã€‚",me,j,ce,Z,qe="è®©æˆ‘ä»¬è€ƒè™‘ä»¥ä¸‹TensorFlow ä¸­çš„æ¨¡å‹ï¼š",ue,_,fe,X,Ae="ä¸Šè¿°æ¨¡å‹æ¥å—ç»´åº¦ä¸º <code>(10,)</code> çš„è¾“å…¥ã€‚æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨æ¨¡å‹è¿›è¡Œå‰å‘ä¼ æ’­ï¼š",de,k,Me,G,Se="ä¸ºäº†ä½¿ç”¨ XLA ç¼–è¯‘çš„å‡½æ•°è¿è¡Œå‰å‘ä¼ æ’­ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š",Te,R,ye,I,Pe="<code>model</code>çš„é»˜è®¤<code>call()</code>å‡½æ•°ç”¨äºç¼–è¯‘XLAå›¾ã€‚ä½†å¦‚æœä½ æƒ³å°†å…¶ä»–æ¨¡å‹å‡½æ•°ç¼–è¯‘æˆXLAï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š",we,W,Je,V,be,F,De="è¦åœ¨ğŸ¤— Transformersä¸­å¯ç”¨XLAåŠ é€Ÿç”Ÿæˆï¼Œæ‚¨éœ€è¦å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„<code>transformers</code>ã€‚æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…å®ƒï¼š",he,$,Ue,C,Ke="ç„¶åæ‚¨å¯ä»¥è¿è¡Œä»¥ä¸‹ä»£ç ï¼š",ge,v,je,x,Oe="æ­£å¦‚æ‚¨æ‰€æ³¨æ„åˆ°çš„ï¼Œåœ¨<code>generate()</code>ä¸Šå¯ç”¨XLAåªéœ€è¦ä¸€è¡Œä»£ç ã€‚å…¶ä½™éƒ¨åˆ†ä»£ç ä¿æŒä¸å˜ã€‚ç„¶è€Œï¼Œä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­æœ‰ä¸€äº›ä¸XLAç›¸å…³çš„æ³¨æ„äº‹é¡¹ã€‚æ‚¨éœ€è¦äº†è§£è¿™äº›æ³¨æ„äº‹é¡¹ï¼Œä»¥å……åˆ†åˆ©ç”¨XLAå¯èƒ½å¸¦æ¥çš„æ€§èƒ½æå‡ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹é¢çš„éƒ¨åˆ†è®¨è®ºè¿™äº›å†…å®¹ã€‚",Ze,B,_e,z,et='å½“æ‚¨é¦–æ¬¡æ‰§è¡Œå¯ç”¨XLAçš„å‡½æ•°ï¼ˆå¦‚ä¸Šé¢çš„<code>xla_generate()</code>ï¼‰æ—¶ï¼Œå®ƒå°†åœ¨å†…éƒ¨å°è¯•æ¨æ–­è®¡ç®—å›¾ï¼Œè¿™æ˜¯ä¸€ä¸ªè€—æ—¶çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º<a href="https://www.tensorflow.org/guide/intro_to_graphs#when_is_a_function_tracing" rel="nofollow">â€œtracingâ€</a>ã€‚',Xe,L,tt="æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ç”Ÿæˆæ—¶é—´å¹¶ä¸å¿«ã€‚è¿ç»­è°ƒç”¨<code>xla_generate()</code>ï¼ˆæˆ–ä»»ä½•å…¶ä»–å¯ç”¨äº†XLAçš„å‡½æ•°ï¼‰ä¸éœ€è¦å†æ¬¡æ¨æ–­è®¡ç®—å›¾ï¼Œåªè¦å‡½æ•°çš„è¾“å…¥ä¸æœ€åˆæ„å»ºè®¡ç®—å›¾æ—¶çš„å½¢çŠ¶ç›¸åŒ¹é…ã€‚å¯¹äºå…·æœ‰å›ºå®šè¾“å…¥å½¢çŠ¶çš„æ¨¡æ€ï¼ˆä¾‹å¦‚å›¾åƒï¼‰ï¼Œè¿™ä¸æ˜¯é—®é¢˜ï¼Œä½†å¦‚æœæ‚¨æ­£åœ¨å¤„ç†å…·æœ‰å¯å˜è¾“å…¥å½¢çŠ¶çš„æ¨¡æ€ï¼ˆä¾‹å¦‚æ–‡æœ¬ï¼‰ï¼Œåˆ™å¿…é¡»æ³¨æ„ã€‚",ke,E,lt="ä¸ºäº†ç¡®ä¿<code>xla_generate()</code>å§‹ç»ˆä½¿ç”¨ç›¸åŒçš„è¾“å…¥å½¢çŠ¶ï¼Œæ‚¨å¯ä»¥åœ¨è°ƒç”¨<code>tokenizer</code>æ—¶æŒ‡å®š<code>padding</code>å‚æ•°ã€‚",Ge,Y,Re,H,st="é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæ‚¨å¯ä»¥ç¡®ä¿<code>xla_generate()</code>çš„è¾“å…¥å§‹ç»ˆå…·æœ‰å®ƒè·Ÿè¸ªçš„å½¢çŠ¶ï¼Œä»è€ŒåŠ é€Ÿç”Ÿæˆæ—¶é—´ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼š",Ie,N,We,Q,nt="åœ¨Tesla T4 GPUä¸Šï¼Œæ‚¨å¯ä»¥æœŸæœ›å¦‚ä¸‹çš„è¾“å‡ºï¼š",Ve,q,Fe,A,at="ç¬¬ä¸€æ¬¡è°ƒç”¨<code>xla_generate()</code>ä¼šå› ä¸º<code>tracing</code>è€Œè€—æ—¶ï¼Œä½†åç»­çš„è°ƒç”¨ä¼šå¿«å¾—å¤šã€‚è¯·æ³¨æ„ï¼Œä»»ä½•æ—¶å€™å¯¹ç”Ÿæˆé€‰é¡¹çš„æ›´æ”¹éƒ½ä¼šè§¦å‘é‡æ–°<code>tracing</code>ï¼Œä»è€Œå¯¼è‡´ç”Ÿæˆæ—¶é—´å‡æ…¢ã€‚",$e,S,ot="åœ¨æœ¬æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰æ¶µç›–ğŸ¤— Transformersæä¾›çš„æ‰€æœ‰æ–‡æœ¬ç”Ÿæˆé€‰é¡¹ã€‚æˆ‘ä»¬é¼“åŠ±æ‚¨é˜…è¯»æ–‡æ¡£ä»¥äº†è§£é«˜çº§ç”¨ä¾‹ã€‚",Ce,P,ve,D,pt="ä»¥ä¸‹æ˜¯ä¸€äº›é™„åŠ èµ„æºï¼Œå¦‚æœæ‚¨æƒ³æ·±å…¥äº†è§£åœ¨ğŸ¤— Transformerså’Œå…¶ä»–åº“ä¸‹ä½¿ç”¨XLAï¼š",xe,K,rt='<li><p><a href="https://colab.research.google.com/github/huggingface/blog/blob/main/notebooks/91_tf_xla_generate.ipynb" rel="nofollow">è¿™ä¸ªColab Notebook</a> æä¾›äº†ä¸€ä¸ªäº’åŠ¨æ¼”ç¤ºï¼Œè®©æ‚¨å¯ä»¥å°è¯•ä½¿ç”¨XLAå…¼å®¹çš„ç¼–ç å™¨-è§£ç å™¨ï¼ˆä¾‹å¦‚<a href="https://huggingface.co/docs/transformers/model_doc/t5" rel="nofollow">T5</a>ï¼‰å’Œä»…è§£ç å™¨ï¼ˆä¾‹å¦‚<a href="https://huggingface.co/docs/transformers/model_doc/gpt2" rel="nofollow">GPT2</a>ï¼‰æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ã€‚</p></li> <li><p><a href="https://huggingface.co/blog/tf-xla-generate" rel="nofollow">è¿™ç¯‡åšå®¢æ–‡ç« </a> æä¾›äº†XLAå…¼å®¹æ¨¡å‹çš„æ¯”è¾ƒåŸºå‡†æ¦‚è¿°ï¼Œä»¥åŠå…³äºåœ¨TensorFlowä¸­ä½¿ç”¨XLAçš„å‹å¥½ä»‹ç»ã€‚</p></li> <li><p><a href="https://blog.tensorflow.org/2022/11/how-hugging-face-improved-text-generation-performance-with-xla.html" rel="nofollow">è¿™ç¯‡åšå®¢æ–‡ç« </a> è®¨è®ºäº†æˆ‘ä»¬åœ¨ğŸ¤— Transformersä¸­ä¸ºTensorFlowæ¨¡å‹æ·»åŠ XLAæ”¯æŒçš„è®¾è®¡ç†å¿µã€‚</p></li> <li><p>æ¨èç”¨äºæ›´å¤šå­¦ä¹ XLAå’ŒTensorFlowå›¾çš„èµ„æºï¼š</p> <ul><li><a href="https://www.tensorflow.org/xla" rel="nofollow">XLAï¼šé¢å‘æœºå™¨å­¦ä¹ çš„ä¼˜åŒ–ç¼–è¯‘å™¨</a></li> <li><a href="https://www.tensorflow.org/guide/intro_to_graphs" rel="nofollow">å›¾å’Œtf.functionç®€ä»‹</a></li> <li><a href="https://www.tensorflow.org/guide/function" rel="nofollow">ä½¿ç”¨tf.functionè·å¾—æ›´å¥½çš„æ€§èƒ½</a></li></ul></li>',Be,ee,ze;return y=new te({props:{title:"ç”¨äº TensorFlow æ¨¡å‹çš„ XLA é›†æˆ",local:"ç”¨äº-tensorflow-æ¨¡å‹çš„-xla-é›†æˆ",headingTag:"h1"}}),w=new wt({props:{classNames:"absolute z-10 right-0 top-0",options:[{label:"Mixed",value:"https://colab.research.google.com/github/huggingface/notebooks/blob/main/transformers_doc/zh/tf_xla.ipynb"},{label:"PyTorch",value:"https://colab.research.google.com/github/huggingface/notebooks/blob/main/transformers_doc/zh/pytorch/tf_xla.ipynb"},{label:"TensorFlow",value:"https://colab.research.google.com/github/huggingface/notebooks/blob/main/transformers_doc/zh/tensorflow/tf_xla.ipynb"},{label:"Mixed",value:"https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/main/transformers_doc/zh/tf_xla.ipynb"},{label:"PyTorch",value:"https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/main/transformers_doc/zh/pytorch/tf_xla.ipynb"},{label:"TensorFlow",value:"https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/main/transformers_doc/zh/tensorflow/tf_xla.ipynb"}]}}),j=new te({props:{title:"ä½¿ç”¨ XLA è¿è¡Œ TensorFlow å‡½æ•°",local:"ä½¿ç”¨-xla-è¿è¡Œ-tensorflow-å‡½æ•°",headingTag:"h2"}}),_=new T({props:{code:"aW1wb3J0JTIwdGVuc29yZmxvdyUyMGFzJTIwdGYlMEElMEFtb2RlbCUyMCUzRCUyMHRmLmtlcmFzLlNlcXVlbnRpYWwoJTBBJTIwJTIwJTIwJTIwJTVCdGYua2VyYXMubGF5ZXJzLkRlbnNlKDEwJTJDJTIwaW5wdXRfc2hhcGUlM0QoMTAlMkMpJTJDJTIwYWN0aXZhdGlvbiUzRCUyMnJlbHUlMjIpJTJDJTIwdGYua2VyYXMubGF5ZXJzLkRlbnNlKDUlMkMlMjBhY3RpdmF0aW9uJTNEJTIyc29mdG1heCUyMiklNUQlMEEp",highlighted:`<span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf

model = tf.keras.Sequential(
    [tf.keras.layers.Dense(<span class="hljs-number">10</span>, input_shape=(<span class="hljs-number">10</span>,), activation=<span class="hljs-string">&quot;relu&quot;</span>), tf.keras.layers.Dense(<span class="hljs-number">5</span>, activation=<span class="hljs-string">&quot;softmax&quot;</span>)]
)`,wrap:!1}}),k=new T({props:{code:"JTIzJTIwR2VuZXJhdGUlMjByYW5kb20lMjBpbnB1dHMlMjBmb3IlMjB0aGUlMjBtb2RlbC4lMEFiYXRjaF9zaXplJTIwJTNEJTIwMTYlMEFpbnB1dF92ZWN0b3JfZGltJTIwJTNEJTIwMTAlMEFyYW5kb21faW5wdXRzJTIwJTNEJTIwdGYucmFuZG9tLm5vcm1hbCgoYmF0Y2hfc2l6ZSUyQyUyMGlucHV0X3ZlY3Rvcl9kaW0pKSUwQSUwQSUyMyUyMFJ1biUyMGElMjBmb3J3YXJkJTIwcGFzcy4lMEFfJTIwJTNEJTIwbW9kZWwocmFuZG9tX2lucHV0cyk=",highlighted:`<span class="hljs-comment"># Generate random inputs for the model.</span>
batch_size = <span class="hljs-number">16</span>
input_vector_dim = <span class="hljs-number">10</span>
random_inputs = tf.random.normal((batch_size, input_vector_dim))

<span class="hljs-comment"># Run a forward pass.</span>
_ = model(random_inputs)`,wrap:!1}}),R=new T({props:{code:"eGxhX2ZuJTIwJTNEJTIwdGYuZnVuY3Rpb24obW9kZWwlMkMlMjBqaXRfY29tcGlsZSUzRFRydWUpJTBBXyUyMCUzRCUyMHhsYV9mbihyYW5kb21faW5wdXRzKQ==",highlighted:`xla_fn = tf.function(model, jit_compile=<span class="hljs-literal">True</span>)
_ = xla_fn(random_inputs)`,wrap:!1}}),W=new T({props:{code:"bXlfeGxhX2ZuJTIwJTNEJTIwdGYuZnVuY3Rpb24obW9kZWwubXlfeGxhX2ZuJTJDJTIwaml0X2NvbXBpbGUlM0RUcnVlKQ==",highlighted:'my_xla_fn = tf.function(model.my_xla_fn, jit_compile=<span class="hljs-literal">True</span>)',wrap:!1}}),V=new te({props:{title:"åœ¨ğŸ¤— Transformersåº“ä¸­ä½¿ç”¨XLAè¿è¡ŒTensorFlowæ–‡æœ¬ç”Ÿæˆæ¨¡å‹",local:"åœ¨-transformersåº“ä¸­ä½¿ç”¨xlaè¿è¡Œtensorflowæ–‡æœ¬ç”Ÿæˆæ¨¡å‹",headingTag:"h2"}}),$=new T({props:{code:"cGlwJTIwaW5zdGFsbCUyMHRyYW5zZm9ybWVycyUyMC0tdXBncmFkZQ==",highlighted:"pip install transformers --upgrade",wrap:!1}}),v=new T({props:{code:"aW1wb3J0JTIwdGVuc29yZmxvdyUyMGFzJTIwdGYlMEFmcm9tJTIwdHJhbnNmb3JtZXJzJTIwaW1wb3J0JTIwQXV0b1Rva2VuaXplciUyQyUyMFRGQXV0b01vZGVsRm9yQ2F1c2FsTE0lMEElMEElMjMlMjBXaWxsJTIwZXJyb3IlMjBpZiUyMHRoZSUyMG1pbmltYWwlMjB2ZXJzaW9uJTIwb2YlMjBUcmFuc2Zvcm1lcnMlMjBpcyUyMG5vdCUyMGluc3RhbGxlZC4lMEFmcm9tJTIwdHJhbnNmb3JtZXJzLnV0aWxzJTIwaW1wb3J0JTIwY2hlY2tfbWluX3ZlcnNpb24lMEElMEFjaGVja19taW5fdmVyc2lvbiglMjI0LjIxLjAlMjIpJTBBJTBBJTBBdG9rZW5pemVyJTIwJTNEJTIwQXV0b1Rva2VuaXplci5mcm9tX3ByZXRyYWluZWQoJTIyb3BlbmFpLWNvbW11bml0eSUyRmdwdDIlMjIlMkMlMjBwYWRkaW5nX3NpZGUlM0QlMjJsZWZ0JTIyJTJDJTIwcGFkX3Rva2VuJTNEJTIyJTNDJTJGcyUzRSUyMiklMEFtb2RlbCUyMCUzRCUyMFRGQXV0b01vZGVsRm9yQ2F1c2FsTE0uZnJvbV9wcmV0cmFpbmVkKCUyMm9wZW5haS1jb21tdW5pdHklMkZncHQyJTIyKSUwQWlucHV0X3N0cmluZyUyMCUzRCUyMCU1QiUyMlRlbnNvckZsb3clMjBpcyUyMiU1RCUwQSUwQSUyMyUyME9uZSUyMGxpbmUlMjB0byUyMGNyZWF0ZSUyMGFuJTIwWExBJTIwZ2VuZXJhdGlvbiUyMGZ1bmN0aW9uJTBBeGxhX2dlbmVyYXRlJTIwJTNEJTIwdGYuZnVuY3Rpb24obW9kZWwuZ2VuZXJhdGUlMkMlMjBqaXRfY29tcGlsZSUzRFRydWUpJTBBJTBBdG9rZW5pemVkX2lucHV0JTIwJTNEJTIwdG9rZW5pemVyKGlucHV0X3N0cmluZyUyQyUyMHJldHVybl90ZW5zb3JzJTNEJTIydGYlMjIpJTBBZ2VuZXJhdGVkX3Rva2VucyUyMCUzRCUyMHhsYV9nZW5lcmF0ZSgqKnRva2VuaXplZF9pbnB1dCUyQyUyMG51bV9iZWFtcyUzRDIpJTBBJTBBZGVjb2RlZF90ZXh0JTIwJTNEJTIwdG9rZW5pemVyLmRlY29kZShnZW5lcmF0ZWRfdG9rZW5zJTVCMCU1RCUyQyUyMHNraXBfc3BlY2lhbF90b2tlbnMlM0RUcnVlKSUwQXByaW50KGYlMjJHZW5lcmF0ZWQlMjAtLSUyMCU3QmRlY29kZWRfdGV4dCU3RCUyMiklMEElMjMlMjBHZW5lcmF0ZWQlMjAtLSUyMFRlbnNvckZsb3clMjBpcyUyMGFuJTIwb3Blbi1zb3VyY2UlMkMlMjBvcGVuLXNvdXJjZSUyQyUyMGRpc3RyaWJ1dGVkLXNvdXJjZSUyMGFwcGxpY2F0aW9uJTIwJTIzJTIwZnJhbWV3b3JrJTIwZm9yJTIwdGhl",highlighted:`<span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf
<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer, TFAutoModelForCausalLM

<span class="hljs-comment"># Will error if the minimal version of Transformers is not installed.</span>
<span class="hljs-keyword">from</span> transformers.utils <span class="hljs-keyword">import</span> check_min_version

check_min_version(<span class="hljs-string">&quot;4.21.0&quot;</span>)


tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">&quot;openai-community/gpt2&quot;</span>, padding_side=<span class="hljs-string">&quot;left&quot;</span>, pad_token=<span class="hljs-string">&quot;&lt;/s&gt;&quot;</span>)
model = TFAutoModelForCausalLM.from_pretrained(<span class="hljs-string">&quot;openai-community/gpt2&quot;</span>)
input_string = [<span class="hljs-string">&quot;TensorFlow is&quot;</span>]

<span class="hljs-comment"># One line to create an XLA generation function</span>
xla_generate = tf.function(model.generate, jit_compile=<span class="hljs-literal">True</span>)

tokenized_input = tokenizer(input_string, return_tensors=<span class="hljs-string">&quot;tf&quot;</span>)
generated_tokens = xla_generate(**tokenized_input, num_beams=<span class="hljs-number">2</span>)

decoded_text = tokenizer.decode(generated_tokens[<span class="hljs-number">0</span>], skip_special_tokens=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Generated -- <span class="hljs-subst">{decoded_text}</span>&quot;</span>)
<span class="hljs-comment"># Generated -- TensorFlow is an open-source, open-source, distributed-source application # framework for the</span>`,wrap:!1}}),B=new te({props:{title:"éœ€è¦å…³æ³¨çš„æ³¨æ„äº‹é¡¹",local:"éœ€è¦å…³æ³¨çš„æ³¨æ„äº‹é¡¹",headingTag:"h2"}}),Y=new T({props:{code:"aW1wb3J0JTIwdGVuc29yZmxvdyUyMGFzJTIwdGYlMEFmcm9tJTIwdHJhbnNmb3JtZXJzJTIwaW1wb3J0JTIwQXV0b1Rva2VuaXplciUyQyUyMFRGQXV0b01vZGVsRm9yQ2F1c2FsTE0lMEElMEF0b2tlbml6ZXIlMjAlM0QlMjBBdXRvVG9rZW5pemVyLmZyb21fcHJldHJhaW5lZCglMjJvcGVuYWktY29tbXVuaXR5JTJGZ3B0MiUyMiUyQyUyMHBhZGRpbmdfc2lkZSUzRCUyMmxlZnQlMjIlMkMlMjBwYWRfdG9rZW4lM0QlMjIlM0MlMkZzJTNFJTIyKSUwQW1vZGVsJTIwJTNEJTIwVEZBdXRvTW9kZWxGb3JDYXVzYWxMTS5mcm9tX3ByZXRyYWluZWQoJTIyb3BlbmFpLWNvbW11bml0eSUyRmdwdDIlMjIpJTBBaW5wdXRfc3RyaW5nJTIwJTNEJTIwJTVCJTIyVGVuc29yRmxvdyUyMGlzJTIyJTVEJTBBJTBBeGxhX2dlbmVyYXRlJTIwJTNEJTIwdGYuZnVuY3Rpb24obW9kZWwuZ2VuZXJhdGUlMkMlMjBqaXRfY29tcGlsZSUzRFRydWUpJTBBJTBBJTIzJTIwSGVyZSUyQyUyMHdlJTIwY2FsbCUyMHRoZSUyMHRva2VuaXplciUyMHdpdGglMjBwYWRkaW5nJTIwb3B0aW9ucy4lMEF0b2tlbml6ZWRfaW5wdXQlMjAlM0QlMjB0b2tlbml6ZXIoaW5wdXRfc3RyaW5nJTJDJTIwcGFkX3RvX211bHRpcGxlX29mJTNEOCUyQyUyMHBhZGRpbmclM0RUcnVlJTJDJTIwcmV0dXJuX3RlbnNvcnMlM0QlMjJ0ZiUyMiklMEElMEFnZW5lcmF0ZWRfdG9rZW5zJTIwJTNEJTIweGxhX2dlbmVyYXRlKCoqdG9rZW5pemVkX2lucHV0JTJDJTIwbnVtX2JlYW1zJTNEMiklMEFkZWNvZGVkX3RleHQlMjAlM0QlMjB0b2tlbml6ZXIuZGVjb2RlKGdlbmVyYXRlZF90b2tlbnMlNUIwJTVEJTJDJTIwc2tpcF9zcGVjaWFsX3Rva2VucyUzRFRydWUpJTBBcHJpbnQoZiUyMkdlbmVyYXRlZCUyMC0tJTIwJTdCZGVjb2RlZF90ZXh0JTdEJTIyKQ==",highlighted:`<span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf
<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer, TFAutoModelForCausalLM

tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">&quot;openai-community/gpt2&quot;</span>, padding_side=<span class="hljs-string">&quot;left&quot;</span>, pad_token=<span class="hljs-string">&quot;&lt;/s&gt;&quot;</span>)
model = TFAutoModelForCausalLM.from_pretrained(<span class="hljs-string">&quot;openai-community/gpt2&quot;</span>)
input_string = [<span class="hljs-string">&quot;TensorFlow is&quot;</span>]

xla_generate = tf.function(model.generate, jit_compile=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># Here, we call the tokenizer with padding options.</span>
tokenized_input = tokenizer(input_string, pad_to_multiple_of=<span class="hljs-number">8</span>, padding=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">&quot;tf&quot;</span>)

generated_tokens = xla_generate(**tokenized_input, num_beams=<span class="hljs-number">2</span>)
decoded_text = tokenizer.decode(generated_tokens[<span class="hljs-number">0</span>], skip_special_tokens=<span class="hljs-literal">True</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Generated -- <span class="hljs-subst">{decoded_text}</span>&quot;</span>)`,wrap:!1}}),N=new T({props:{code:"aW1wb3J0JTIwdGltZSUwQWltcG9ydCUyMHRlbnNvcmZsb3clMjBhcyUyMHRmJTBBZnJvbSUyMHRyYW5zZm9ybWVycyUyMGltcG9ydCUyMEF1dG9Ub2tlbml6ZXIlMkMlMjBURkF1dG9Nb2RlbEZvckNhdXNhbExNJTBBJTBBdG9rZW5pemVyJTIwJTNEJTIwQXV0b1Rva2VuaXplci5mcm9tX3ByZXRyYWluZWQoJTIyb3BlbmFpLWNvbW11bml0eSUyRmdwdDIlMjIlMkMlMjBwYWRkaW5nX3NpZGUlM0QlMjJsZWZ0JTIyJTJDJTIwcGFkX3Rva2VuJTNEJTIyJTNDJTJGcyUzRSUyMiklMEFtb2RlbCUyMCUzRCUyMFRGQXV0b01vZGVsRm9yQ2F1c2FsTE0uZnJvbV9wcmV0cmFpbmVkKCUyMm9wZW5haS1jb21tdW5pdHklMkZncHQyJTIyKSUwQSUwQXhsYV9nZW5lcmF0ZSUyMCUzRCUyMHRmLmZ1bmN0aW9uKG1vZGVsLmdlbmVyYXRlJTJDJTIwaml0X2NvbXBpbGUlM0RUcnVlKSUwQSUwQWZvciUyMGlucHV0X3N0cmluZyUyMGluJTIwJTVCJTIyVGVuc29yRmxvdyUyMGlzJTIyJTJDJTIwJTIyVGVuc29yRmxvdyUyMGlzJTIwYSUyMiUyQyUyMCUyMlRGTGl0ZSUyMGlzJTIwYSUyMiU1RCUzQSUwQSUyMCUyMCUyMCUyMHRva2VuaXplZF9pbnB1dCUyMCUzRCUyMHRva2VuaXplcihpbnB1dF9zdHJpbmclMkMlMjBwYWRfdG9fbXVsdGlwbGVfb2YlM0Q4JTJDJTIwcGFkZGluZyUzRFRydWUlMkMlMjByZXR1cm5fdGVuc29ycyUzRCUyMnRmJTIyKSUwQSUyMCUyMCUyMCUyMHN0YXJ0JTIwJTNEJTIwdGltZS50aW1lX25zKCklMEElMjAlMjAlMjAlMjBnZW5lcmF0ZWRfdG9rZW5zJTIwJTNEJTIweGxhX2dlbmVyYXRlKCoqdG9rZW5pemVkX2lucHV0JTJDJTIwbnVtX2JlYW1zJTNEMiklMEElMjAlMjAlMjAlMjBlbmQlMjAlM0QlMjB0aW1lLnRpbWVfbnMoKSUwQSUyMCUyMCUyMCUyMHByaW50KGYlMjJFeGVjdXRpb24lMjB0aW1lJTIwLS0lMjAlN0IoZW5kJTIwLSUyMHN0YXJ0KSUyMCUyRiUyMDFlNiUzQS4xZiU3RCUyMG1zJTVDbiUyMik=",highlighted:`<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> tensorflow <span class="hljs-keyword">as</span> tf
<span class="hljs-keyword">from</span> transformers <span class="hljs-keyword">import</span> AutoTokenizer, TFAutoModelForCausalLM

tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">&quot;openai-community/gpt2&quot;</span>, padding_side=<span class="hljs-string">&quot;left&quot;</span>, pad_token=<span class="hljs-string">&quot;&lt;/s&gt;&quot;</span>)
model = TFAutoModelForCausalLM.from_pretrained(<span class="hljs-string">&quot;openai-community/gpt2&quot;</span>)

xla_generate = tf.function(model.generate, jit_compile=<span class="hljs-literal">True</span>)

<span class="hljs-keyword">for</span> input_string <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;TensorFlow is&quot;</span>, <span class="hljs-string">&quot;TensorFlow is a&quot;</span>, <span class="hljs-string">&quot;TFLite is a&quot;</span>]:
    tokenized_input = tokenizer(input_string, pad_to_multiple_of=<span class="hljs-number">8</span>, padding=<span class="hljs-literal">True</span>, return_tensors=<span class="hljs-string">&quot;tf&quot;</span>)
    start = time.time_ns()
    generated_tokens = xla_generate(**tokenized_input, num_beams=<span class="hljs-number">2</span>)
    end = time.time_ns()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Execution time -- <span class="hljs-subst">{(end - start) / <span class="hljs-number">1e6</span>:<span class="hljs-number">.1</span>f}</span> ms\\n&quot;</span>)`,wrap:!1}}),q=new T({props:{code:"RXhlY3V0aW9uJTIwdGltZSUyMC0tJTIwMzA4MTkuNiUyMG1zJTBBJTBBRXhlY3V0aW9uJTIwdGltZSUyMC0tJTIwNzkuMCUyMG1zJTBBJTBBRXhlY3V0aW9uJTIwdGltZSUyMC0tJTIwNzguOSUyMG1z",highlighted:`Execution time -- 30819.6 ms

Execution time -- 79.0 ms

Execution time -- 78.9 ms`,wrap:!1}}),P=new te({props:{title:"é™„åŠ èµ„æº",local:"é™„åŠ èµ„æº",headingTag:"h2"}}),{c(){M=o("meta"),le=n(),O=o("p"),se=n(),i(y.$$.fragment),ne=n(),i(w.$$.fragment),ae=n(),J=o("p"),J.innerHTML=Ee,oe=n(),b=o("p"),b.textContent=Ye,pe=n(),h=o("p"),h.innerHTML=He,re=n(),U=o("p"),U.innerHTML=Ne,ie=n(),g=o("p"),g.textContent=Qe,me=n(),i(j.$$.fragment),ce=n(),Z=o("p"),Z.textContent=qe,ue=n(),i(_.$$.fragment),fe=n(),X=o("p"),X.innerHTML=Ae,de=n(),i(k.$$.fragment),Me=n(),G=o("p"),G.textContent=Se,Te=n(),i(R.$$.fragment),ye=n(),I=o("p"),I.innerHTML=Pe,we=n(),i(W.$$.fragment),Je=n(),i(V.$$.fragment),be=n(),F=o("p"),F.innerHTML=De,he=n(),i($.$$.fragment),Ue=n(),C=o("p"),C.textContent=Ke,ge=n(),i(v.$$.fragment),je=n(),x=o("p"),x.innerHTML=Oe,Ze=n(),i(B.$$.fragment),_e=n(),z=o("p"),z.innerHTML=et,Xe=n(),L=o("p"),L.innerHTML=tt,ke=n(),E=o("p"),E.innerHTML=lt,Ge=n(),i(Y.$$.fragment),Re=n(),H=o("p"),H.innerHTML=st,Ie=n(),i(N.$$.fragment),We=n(),Q=o("p"),Q.textContent=nt,Ve=n(),i(q.$$.fragment),Fe=n(),A=o("p"),A.innerHTML=at,$e=n(),S=o("p"),S.textContent=ot,Ce=n(),i(P.$$.fragment),ve=n(),D=o("p"),D.textContent=pt,xe=n(),K=o("ul"),K.innerHTML=rt,Be=n(),ee=o("p"),this.h()},l(e){const t=Tt("svelte-u9bgzb",document.head);M=p(t,"META",{name:!0,content:!0}),t.forEach(l),le=a(e),O=p(e,"P",{}),it(O).forEach(l),se=a(e),m(y.$$.fragment,e),ne=a(e),m(w.$$.fragment,e),ae=a(e),J=p(e,"P",{"data-svelte-h":!0}),r(J)!=="svelte-1ab31dt"&&(J.innerHTML=Ee),oe=a(e),b=p(e,"P",{"data-svelte-h":!0}),r(b)!=="svelte-1pvm1ip"&&(b.textContent=Ye),pe=a(e),h=p(e,"P",{"data-svelte-h":!0}),r(h)!=="svelte-r8rbc5"&&(h.innerHTML=He),re=a(e),U=p(e,"P",{"data-svelte-h":!0}),r(U)!=="svelte-p7rlbq"&&(U.innerHTML=Ne),ie=a(e),g=p(e,"P",{"data-svelte-h":!0}),r(g)!=="svelte-1xuz7ym"&&(g.textContent=Qe),me=a(e),m(j.$$.fragment,e),ce=a(e),Z=p(e,"P",{"data-svelte-h":!0}),r(Z)!=="svelte-1vn6z9m"&&(Z.textContent=qe),ue=a(e),m(_.$$.fragment,e),fe=a(e),X=p(e,"P",{"data-svelte-h":!0}),r(X)!=="svelte-edbqcr"&&(X.innerHTML=Ae),de=a(e),m(k.$$.fragment,e),Me=a(e),G=p(e,"P",{"data-svelte-h":!0}),r(G)!=="svelte-1567hs3"&&(G.textContent=Se),Te=a(e),m(R.$$.fragment,e),ye=a(e),I=p(e,"P",{"data-svelte-h":!0}),r(I)!=="svelte-1d2xanc"&&(I.innerHTML=Pe),we=a(e),m(W.$$.fragment,e),Je=a(e),m(V.$$.fragment,e),be=a(e),F=p(e,"P",{"data-svelte-h":!0}),r(F)!=="svelte-1jrv2bf"&&(F.innerHTML=De),he=a(e),m($.$$.fragment,e),Ue=a(e),C=p(e,"P",{"data-svelte-h":!0}),r(C)!=="svelte-1xbae7q"&&(C.textContent=Ke),ge=a(e),m(v.$$.fragment,e),je=a(e),x=p(e,"P",{"data-svelte-h":!0}),r(x)!=="svelte-k1gawp"&&(x.innerHTML=Oe),Ze=a(e),m(B.$$.fragment,e),_e=a(e),z=p(e,"P",{"data-svelte-h":!0}),r(z)!=="svelte-1ccko4b"&&(z.innerHTML=et),Xe=a(e),L=p(e,"P",{"data-svelte-h":!0}),r(L)!=="svelte-1eerun3"&&(L.innerHTML=tt),ke=a(e),E=p(e,"P",{"data-svelte-h":!0}),r(E)!=="svelte-nx5jow"&&(E.innerHTML=lt),Ge=a(e),m(Y.$$.fragment,e),Re=a(e),H=p(e,"P",{"data-svelte-h":!0}),r(H)!=="svelte-a0s1z1"&&(H.innerHTML=st),Ie=a(e),m(N.$$.fragment,e),We=a(e),Q=p(e,"P",{"data-svelte-h":!0}),r(Q)!=="svelte-15o96gl"&&(Q.textContent=nt),Ve=a(e),m(q.$$.fragment,e),Fe=a(e),A=p(e,"P",{"data-svelte-h":!0}),r(A)!=="svelte-ctf36t"&&(A.innerHTML=at),$e=a(e),S=p(e,"P",{"data-svelte-h":!0}),r(S)!=="svelte-1qb1iwp"&&(S.textContent=ot),Ce=a(e),m(P.$$.fragment,e),ve=a(e),D=p(e,"P",{"data-svelte-h":!0}),r(D)!=="svelte-nhayyz"&&(D.textContent=pt),xe=a(e),K=p(e,"UL",{"data-svelte-h":!0}),r(K)!=="svelte-11ijxsh"&&(K.innerHTML=rt),Be=a(e),ee=p(e,"P",{}),it(ee).forEach(l),this.h()},h(){mt(M,"name","hf:doc:metadata"),mt(M,"content",bt)},m(e,t){yt(document.head,M),s(e,le,t),s(e,O,t),s(e,se,t),c(y,e,t),s(e,ne,t),c(w,e,t),s(e,ae,t),s(e,J,t),s(e,oe,t),s(e,b,t),s(e,pe,t),s(e,h,t),s(e,re,t),s(e,U,t),s(e,ie,t),s(e,g,t),s(e,me,t),c(j,e,t),s(e,ce,t),s(e,Z,t),s(e,ue,t),c(_,e,t),s(e,fe,t),s(e,X,t),s(e,de,t),c(k,e,t),s(e,Me,t),s(e,G,t),s(e,Te,t),c(R,e,t),s(e,ye,t),s(e,I,t),s(e,we,t),c(W,e,t),s(e,Je,t),c(V,e,t),s(e,be,t),s(e,F,t),s(e,he,t),c($,e,t),s(e,Ue,t),s(e,C,t),s(e,ge,t),c(v,e,t),s(e,je,t),s(e,x,t),s(e,Ze,t),c(B,e,t),s(e,_e,t),s(e,z,t),s(e,Xe,t),s(e,L,t),s(e,ke,t),s(e,E,t),s(e,Ge,t),c(Y,e,t),s(e,Re,t),s(e,H,t),s(e,Ie,t),c(N,e,t),s(e,We,t),s(e,Q,t),s(e,Ve,t),c(q,e,t),s(e,Fe,t),s(e,A,t),s(e,$e,t),s(e,S,t),s(e,Ce,t),c(P,e,t),s(e,ve,t),s(e,D,t),s(e,xe,t),s(e,K,t),s(e,Be,t),s(e,ee,t),ze=!0},p:ut,i(e){ze||(u(y.$$.fragment,e),u(w.$$.fragment,e),u(j.$$.fragment,e),u(_.$$.fragment,e),u(k.$$.fragment,e),u(R.$$.fragment,e),u(W.$$.fragment,e),u(V.$$.fragment,e),u($.$$.fragment,e),u(v.$$.fragment,e),u(B.$$.fragment,e),u(Y.$$.fragment,e),u(N.$$.fragment,e),u(q.$$.fragment,e),u(P.$$.fragment,e),ze=!0)},o(e){f(y.$$.fragment,e),f(w.$$.fragment,e),f(j.$$.fragment,e),f(_.$$.fragment,e),f(k.$$.fragment,e),f(R.$$.fragment,e),f(W.$$.fragment,e),f(V.$$.fragment,e),f($.$$.fragment,e),f(v.$$.fragment,e),f(B.$$.fragment,e),f(Y.$$.fragment,e),f(N.$$.fragment,e),f(q.$$.fragment,e),f(P.$$.fragment,e),ze=!1},d(e){e&&(l(le),l(O),l(se),l(ne),l(ae),l(J),l(oe),l(b),l(pe),l(h),l(re),l(U),l(ie),l(g),l(me),l(ce),l(Z),l(ue),l(fe),l(X),l(de),l(Me),l(G),l(Te),l(ye),l(I),l(we),l(Je),l(be),l(F),l(he),l(Ue),l(C),l(ge),l(je),l(x),l(Ze),l(_e),l(z),l(Xe),l(L),l(ke),l(E),l(Ge),l(Re),l(H),l(Ie),l(We),l(Q),l(Ve),l(Fe),l(A),l($e),l(S),l(Ce),l(ve),l(D),l(xe),l(K),l(Be),l(ee)),l(M),d(y,e),d(w,e),d(j,e),d(_,e),d(k,e),d(R,e),d(W,e),d(V,e),d($,e),d(v,e),d(B,e),d(Y,e),d(N,e),d(q,e),d(P,e)}}}const bt='{"title":"ç”¨äº TensorFlow æ¨¡å‹çš„ XLA é›†æˆ","local":"ç”¨äº-tensorflow-æ¨¡å‹çš„-xla-é›†æˆ","sections":[{"title":"ä½¿ç”¨ XLA è¿è¡Œ TensorFlow å‡½æ•°","local":"ä½¿ç”¨-xla-è¿è¡Œ-tensorflow-å‡½æ•°","sections":[],"depth":2},{"title":"åœ¨ğŸ¤— Transformersåº“ä¸­ä½¿ç”¨XLAè¿è¡ŒTensorFlowæ–‡æœ¬ç”Ÿæˆæ¨¡å‹","local":"åœ¨-transformersåº“ä¸­ä½¿ç”¨xlaè¿è¡Œtensorflowæ–‡æœ¬ç”Ÿæˆæ¨¡å‹","sections":[],"depth":2},{"title":"éœ€è¦å…³æ³¨çš„æ³¨æ„äº‹é¡¹","local":"éœ€è¦å…³æ³¨çš„æ³¨æ„äº‹é¡¹","sections":[],"depth":2},{"title":"é™„åŠ èµ„æº","local":"é™„åŠ èµ„æº","sections":[],"depth":2}],"depth":1}';function ht(Le){return ft(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class Xt extends dt{constructor(M){super(),Mt(this,M,ht,Jt,ct,{})}}export{Xt as component};
