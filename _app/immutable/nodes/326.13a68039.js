import{s as ue,o as de,n as me}from"../chunks/scheduler.9bc65507.js";import{S as Ie,i as fe,g as M,s as n,r as o,A as be,h as i,f as e,c as a,j as Ce,u as y,x as p,k as he,y as Ae,a as s,v as U,d as c,t as T,w}from"../chunks/index.707bf1b6.js";import{T as Je}from"../chunks/Tip.c2ecdbf4.js";import{C}from"../chunks/CodeBlock.54a9f38d.js";import{H as h}from"../chunks/Heading.342b1fa6.js";function ge(At){let r,J=`oneccl_bindings_for_pytorch 1.12.0 prebuilt wheel does not work with PyTorch 1.12.1 (it is for PyTorch 1.12.0)
PyTorch 1.12.1 should work with oneccl_bindings_for_pytorch 1.12.100`;return{c(){r=M("p"),r.textContent=J},l(j){r=i(j,"P",{"data-svelte-h":!0}),p(r)!=="svelte-is6c7w"&&(r.textContent=J)},m(j,m){s(j,r,m)},p:me,d(j){j&&e(r)}}}function ve(At){let r,J=`The CPU resource limits/requests in the yaml are defined in <a href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#meaning-of-cpu" rel="nofollow">cpu units</a>
where 1 CPU unit is equivalent to 1 physical CPU core or 1 virtual core (depending on whether the node is a physical
host or a VM). The amount of CPU and memory limits/requests defined in the yaml should be less than the amount of
available CPU/memory capacity on a single machine. It is usually a good idea to not use the entire machine’s capacity in
order to leave some resources for the kubelet and OS. In order to get <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-qos/#guaranteed" rel="nofollow">“guaranteed”</a> <a href="https://kubernetes.io/docs/tasks/configure-pod-container/quality-service-pod/" rel="nofollow">quality of service</a> for the worker pods,
set the same CPU and memory amounts for both the resource limits and requests.`;return{c(){r=M("p"),r.innerHTML=J},l(j){r=i(j,"P",{"data-svelte-h":!0}),p(r)!=="svelte-1nu8lil"&&(r.innerHTML=J)},m(j,m){s(j,r,m)},p:me,d(j){j&&e(r)}}}function $e(At){let r,J,j,m,I,vt,f,Zl=`When training on a single CPU is too slow, we can use multiple CPUs. This guide focuses on PyTorch-based DDP enabling
distributed CPU training efficiently on <a href="#usage-in-trainer">bare metal</a> and <a href="#usage-with-kubernetes">Kubernetes</a>.`,$t,b,Bt,A,El='<a href="https://github.com/oneapi-src/oneCCL" rel="nofollow">Intel® oneCCL</a> (collective communications library) is a library for efficient distributed deep learning training implementing such collectives like allreduce, allgather, alltoall. For more information on oneCCL, please refer to the <a href="https://spec.oneapi.com/versions/latest/elements/oneCCL/source/index.html" rel="nofollow">oneCCL documentation</a> and <a href="https://spec.oneapi.com/versions/latest/elements/oneCCL/source/index.html" rel="nofollow">oneCCL specification</a>.',_t,g,Rl="Module <code>oneccl_bindings_for_pytorch</code> (<code>torch_ccl</code> before version 1.12)  implements PyTorch C10D ProcessGroup API and can be dynamically loaded as external ProcessGroup and only works on Linux platform now",xt,v,Gl='Check more detailed information for <a href="https://github.com/intel/torch-ccl" rel="nofollow">oneccl_bind_pt</a>.',St,$,Zt,B,kl="Wheel files are available for the following Python versions:",Et,_,Wl='<thead><tr><th align="center">Extension Version</th> <th align="center">Python 3.6</th> <th align="center">Python 3.7</th> <th align="center">Python 3.8</th> <th align="center">Python 3.9</th> <th align="center">Python 3.10</th></tr></thead> <tbody><tr><td align="center">2.1.0</td> <td align="center"></td> <td align="center">√</td> <td align="center">√</td> <td align="center">√</td> <td align="center">√</td></tr> <tr><td align="center">2.0.0</td> <td align="center"></td> <td align="center">√</td> <td align="center">√</td> <td align="center">√</td> <td align="center">√</td></tr> <tr><td align="center">1.13.0</td> <td align="center"></td> <td align="center">√</td> <td align="center">√</td> <td align="center">√</td> <td align="center">√</td></tr> <tr><td align="center">1.12.100</td> <td align="center"></td> <td align="center">√</td> <td align="center">√</td> <td align="center">√</td> <td align="center">√</td></tr> <tr><td align="center">1.12.0</td> <td align="center"></td> <td align="center">√</td> <td align="center">√</td> <td align="center">√</td> <td align="center">√</td></tr></tbody>',Rt,x,Nl="Please run <code>pip list | grep torch</code> to get your <code>pytorch_version</code>.",Gt,S,kt,Z,Ll=`where <code>{pytorch_version}</code> should be your PyTorch version, for instance 2.1.0.
Check more approaches for <a href="https://github.com/intel/torch-ccl" rel="nofollow">oneccl_bind_pt installation</a>.
Versions of oneCCL and PyTorch must match.`,Wt,u,Nt,E,Lt,R,Vl="Use this standards-based MPI implementation to deliver flexible, efficient, scalable cluster messaging on Intel® architecture. This component is part of the Intel® oneAPI HPC Toolkit.",Vt,G,Pl="oneccl_bindings_for_pytorch is installed along with the MPI tool set. Need to source the environment before using it.",Pt,k,Xl="for Intel® oneCCL >= 1.12.0",Xt,W,Ht,N,Hl="for Intel® oneCCL whose version < 1.12.0",Qt,L,Ft,V,Yt,P,Ql='Intel Extension for PyTorch (IPEX) provides performance optimizations for CPU training with both Float32 and BFloat16 (refer to the <a href="./perf_train_cpu">single CPU section</a> to learn more).',zt,X,Fl="The following “Usage in Trainer” takes mpirun in Intel® MPI library as an example.",qt,H,Dt,Q,Yl="To enable multi CPU distributed training in the Trainer with the ccl backend, users should add <strong><code>--ddp_backend ccl</code></strong> in the command arguments.",Ot,F,zl='Let’s see an example with the <a href="https://github.com/huggingface/transformers/tree/main/examples/pytorch/question-answering" rel="nofollow">question-answering example</a>',Kt,Y,ql="The following command enables training with 2 processes on one Xeon node, with one process running per one socket. The variables OMP_NUM_THREADS/CCL_WORKER_COUNT can be tuned for optimal performance.",tl,z,ll,q,Dl="The following command enables training with a total of four processes on two Xeons (node0 and node1, taking node0 as the main process), ppn (processes per node) is set to 2, with one process running per one socket. The variables OMP_NUM_THREADS/CCL_WORKER_COUNT can be tuned for optimal performance.",el,D,Ol="In node0, you need to create a configuration file which contains the IP addresses of each node (for example hostfile) and pass that configuration file path as an argument.",sl,O,nl,K,Kl="Now, run the following command in node0 and <strong>4DDP</strong> will be enabled in node0 and node1 with BF16 auto mixed precision:",al,tt,Ml,lt,il,et,te=`The same distributed training job from the previous section can be deployed to a Kubernetes cluster using the
<a href="https://www.kubeflow.org/docs/components/training/pytorch/" rel="nofollow">Kubeflow PyTorchJob training operator</a>.`,pl,st,rl,nt,le="This example assumes that you have:",ol,at,ee=`<li>Access to a Kubernetes cluster with <a href="https://www.kubeflow.org/docs/started/installing-kubeflow/" rel="nofollow">Kubeflow installed</a></li> <li><a href="https://kubernetes.io/docs/tasks/tools/" rel="nofollow"><code>kubectl</code></a> installed and configured to access the Kubernetes cluster</li> <li>A <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" rel="nofollow">Persistent Volume Claim (PVC)</a> that can be used
to store datasets and model files. There are multiple options for setting up the PVC including using an NFS
<a href="https://kubernetes.io/docs/concepts/storage/storage-classes/" rel="nofollow">storage class</a> or a cloud storage bucket.</li> <li>A Docker container that includes your model training script and all the dependencies needed to run the script. For
distributed CPU training jobs, this typically includes PyTorch, Transformers, Intel Extension for PyTorch, Intel
oneCCL Bindings for PyTorch, and OpenSSH to communicate between the containers.</li>`,yl,Mt,se=`The snippet below is an example of a Dockerfile that uses a base image that supports distributed CPU training and then
extracts a Transformers release to the <code>/workspace</code> directory, so that the example scripts are included in the image:`,Ul,it,cl,pt,ne=`The image needs to be built and copied to the cluster’s nodes or pushed to a container registry prior to deploying the
PyTorchJob to the cluster.`,Tl,rt,wl,ot,ae=`The <a href="https://www.kubeflow.org/docs/components/training/pytorch/" rel="nofollow">Kubeflow PyTorchJob</a> is used to run the distributed
training job on the cluster. The yaml file for the PyTorchJob defines parameters such as:`,jl,yt,Me="<li>The name of the PyTorchJob</li> <li>The number of replicas (workers)</li> <li>The python script and it’s parameters that will be used to run the training job</li> <li>The types of resources (node selector, memory, and CPU) needed for each worker</li> <li>The image/tag for the Docker container to use</li> <li>Environment variables</li> <li>A volume mount for the PVC</li>",Cl,Ut,ie=`The volume mount defines a path where the PVC will be mounted in the container for each worker pod. This location can be
used for the dataset, checkpoint files, and the saved model after training completes.`,hl,ct,pe=`The snippet below is an example of a yaml file for a PyTorchJob with 4 workers running the
<a href="https://github.com/huggingface/transformers/tree/main/examples/pytorch/question-answering" rel="nofollow">question-answering example</a>.`,Jl,Tt,ml,wt,re="To run this example, update the yaml based on your training script and the nodes in your cluster.",ul,d,dl,jt,Il,Ct,oe=`After the PyTorchJob spec has been updated with values appropriate for your cluster and training job, it can be deployed
to the cluster using:`,fl,ht,bl,Jt,ye=`The <code>kubectl get pods -n kubeflow</code> command can then be used to list the pods in the <code>kubeflow</code> namespace. You should see
the worker pods for the PyTorchJob that was just deployed. At first, they will probably have a status of “Pending” as
the containers get pulled and created, then the status should change to “Running”.`,Al,mt,gl,ut,Ue="The logs for worker can be viewed using <code>kubectl logs -n kubeflow &lt;pod name&gt;</code>. Add <code>-f</code> to stream the logs, for example:",vl,dt,$l,It,ce=`After the training job completes, the trained model can be copied from the PVC or storage location. When you are done
with the job, the PyTorchJob resource can be deleted from the cluster using <code>kubectl delete -f pytorchjob.yaml</code>.`,Bl,ft,_l,bt,Te=`This guide covered running distributed PyTorch training jobs using multiple CPUs on bare metal and on a Kubernetes
cluster. Both cases utilize Intel Extension for PyTorch and Intel oneCCL Bindings for PyTorch for optimal training
performance, and can be used as a template to run your own workload on multiple nodes.`,xl,gt,Sl;return I=new h({props:{title:"Efficient Training on Multiple CPUs",local:"efficient-training-on-multiple-cpus",headingTag:"h1"}}),b=new h({props:{title:"Intel® oneCCL Bindings for PyTorch",local:"intel-oneccl-bindings-for-pytorch",headingTag:"h2"}}),$=new h({props:{title:"Intel® oneCCL Bindings for PyTorch installation",local:"intel-oneccl-bindings-for-pytorch-installation",headingTag:"h3"}}),S=new C({props:{code:"cGlwJTIwaW5zdGFsbCUyMG9uZWNjbF9iaW5kX3B0JTNEJTNEJTdCcHl0b3JjaF92ZXJzaW9uJTdEJTIwLWYlMjBodHRwcyUzQSUyRiUyRmRldmVsb3Blci5pbnRlbC5jb20lMkZpcGV4LXdobC1zdGFibGUtY3B1",highlighted:"pip install oneccl_bind_pt=={pytorch_version} -f https://developer.intel.com/ipex-whl-stable-cpu",wrap:!1}}),u=new Je({props:{warning:!0,$$slots:{default:[ge]},$$scope:{ctx:At}}}),E=new h({props:{title:"Intel® MPI library",local:"intel-mpi-library",headingTag:"h2"}}),W=new C({props:{code:"b25lY2NsX2JpbmRpbmdzX2Zvcl9weXRvcmNoX3BhdGglM0QlMjQocHl0aG9uJTIwLWMlMjAlMjJmcm9tJTIwb25lY2NsX2JpbmRpbmdzX2Zvcl9weXRvcmNoJTIwaW1wb3J0JTIwY3dkJTNCJTIwcHJpbnQoY3dkKSUyMiklMEFzb3VyY2UlMjAlMjRvbmVjY2xfYmluZGluZ3NfZm9yX3B5dG9yY2hfcGF0aCUyRmVudiUyRnNldHZhcnMuc2g=",highlighted:`oneccl_bindings_for_pytorch_path=$(python -c <span class="hljs-string">&quot;from oneccl_bindings_for_pytorch import cwd; print(cwd)&quot;</span>)
<span class="hljs-built_in">source</span> <span class="hljs-variable">$oneccl_bindings_for_pytorch_path</span>/env/setvars.sh`,wrap:!1}}),L=new C({props:{code:"dG9yY2hfY2NsX3BhdGglM0QlMjQocHl0aG9uJTIwLWMlMjAlMjJpbXBvcnQlMjB0b3JjaCUzQiUyMGltcG9ydCUyMHRvcmNoX2NjbCUzQiUyMGltcG9ydCUyMG9zJTNCJTIwJTIwcHJpbnQob3MucGF0aC5hYnNwYXRoKG9zLnBhdGguZGlybmFtZSh0b3JjaF9jY2wuX19maWxlX18pKSklMjIpJTBBc291cmNlJTIwJTI0dG9yY2hfY2NsX3BhdGglMkZlbnYlMkZzZXR2YXJzLnNo",highlighted:`torch_ccl_path=$(python -c <span class="hljs-string">&quot;import torch; import torch_ccl; import os;  print(os.path.abspath(os.path.dirname(torch_ccl.__file__)))&quot;</span>)
<span class="hljs-built_in">source</span> <span class="hljs-variable">$torch_ccl_path</span>/env/setvars.sh`,wrap:!1}}),V=new h({props:{title:"Intel® Extension for PyTorch installation",local:"intel-extension-for-pytorch-installation",headingTag:"h4"}}),H=new h({props:{title:"Usage in Trainer",local:"usage-in-trainer",headingTag:"h2"}}),z=new C({props:{code:"JTIwZXhwb3J0JTIwQ0NMX1dPUktFUl9DT1VOVCUzRDElMEElMjBleHBvcnQlMjBNQVNURVJfQUREUiUzRDEyNy4wLjAuMSUwQSUyMG1waXJ1biUyMC1uJTIwMiUyMC1nZW52JTIwT01QX05VTV9USFJFQURTJTNEMjMlMjAlNUMlMEElMjBweXRob24zJTIwcnVuX3FhLnB5JTIwJTVDJTBBJTIwLS1tb2RlbF9uYW1lX29yX3BhdGglMjBnb29nbGUtYmVydCUyRmJlcnQtbGFyZ2UtdW5jYXNlZCUyMCU1QyUwQSUyMC0tZGF0YXNldF9uYW1lJTIwc3F1YWQlMjAlNUMlMEElMjAtLWRvX3RyYWluJTIwJTVDJTBBJTIwLS1kb19ldmFsJTIwJTVDJTBBJTIwLS1wZXJfZGV2aWNlX3RyYWluX2JhdGNoX3NpemUlMjAxMiUyMCUyMCU1QyUwQSUyMC0tbGVhcm5pbmdfcmF0ZSUyMDNlLTUlMjAlMjAlNUMlMEElMjAtLW51bV90cmFpbl9lcG9jaHMlMjAyJTIwJTIwJTVDJTBBJTIwLS1tYXhfc2VxX2xlbmd0aCUyMDM4NCUyMCU1QyUwQSUyMC0tZG9jX3N0cmlkZSUyMDEyOCUyMCUyMCU1QyUwQSUyMC0tb3V0cHV0X2RpciUyMCUyRnRtcCUyRmRlYnVnX3NxdWFkJTJGJTIwJTVDJTBBJTIwLS1ub19jdWRhJTIwJTVDJTBBJTIwLS1kZHBfYmFja2VuZCUyMGNjbCUyMCU1QyUwQSUyMC0tdXNlX2lwZXg=",highlighted:` export CCL_WORKER_COUNT=1
 export MASTER_ADDR=127.0.0.1
 mpirun -n 2 -genv OMP_NUM_THREADS=23 \\
 python3 run_qa.py \\
 --model_name_or_path google-bert/bert-large-uncased \\
 --dataset_name squad \\
 --do_train \\
 --do_eval \\
 --per_device_train_batch_size 12  \\
 --learning_rate 3e-5  \\
 --num_train_epochs 2  \\
 --max_seq_length 384 \\
 --doc_stride 128  \\
 --output_dir /tmp/debug_squad/ \\
 --no_cuda \\
 --ddp_backend ccl \\
 --use_ipex`,wrap:!1}}),O=new C({props:{code:"JTIwY2F0JTIwaG9zdGZpbGUlMEElMjB4eHgueHh4Lnh4eC54eHglMjAlMjNub2RlMCUyMGlwJTBBJTIweHh4Lnh4eC54eHgueHh4JTIwJTIzbm9kZTElMjBpcA==",highlighted:` cat hostfile
 xxx.xxx.xxx.xxx #node0 ip
 xxx.xxx.xxx.xxx #node1 ip`,wrap:!1}}),tt=new C({props:{code:"JTIwZXhwb3J0JTIwQ0NMX1dPUktFUl9DT1VOVCUzRDElMEElMjBleHBvcnQlMjBNQVNURVJfQUREUiUzRHh4eC54eHgueHh4Lnh4eCUyMCUyM25vZGUwJTIwaXAlMEElMjBtcGlydW4lMjAtZiUyMGhvc3RmaWxlJTIwLW4lMjA0JTIwLXBwbiUyMDIlMjAlNUMlMEElMjAtZ2VudiUyME9NUF9OVU1fVEhSRUFEUyUzRDIzJTIwJTVDJTBBJTIwcHl0aG9uMyUyMHJ1bl9xYS5weSUyMCU1QyUwQSUyMC0tbW9kZWxfbmFtZV9vcl9wYXRoJTIwZ29vZ2xlLWJlcnQlMkZiZXJ0LWxhcmdlLXVuY2FzZWQlMjAlNUMlMEElMjAtLWRhdGFzZXRfbmFtZSUyMHNxdWFkJTIwJTVDJTBBJTIwLS1kb190cmFpbiUyMCU1QyUwQSUyMC0tZG9fZXZhbCUyMCU1QyUwQSUyMC0tcGVyX2RldmljZV90cmFpbl9iYXRjaF9zaXplJTIwMTIlMjAlMjAlNUMlMEElMjAtLWxlYXJuaW5nX3JhdGUlMjAzZS01JTIwJTIwJTVDJTBBJTIwLS1udW1fdHJhaW5fZXBvY2hzJTIwMiUyMCUyMCU1QyUwQSUyMC0tbWF4X3NlcV9sZW5ndGglMjAzODQlMjAlNUMlMEElMjAtLWRvY19zdHJpZGUlMjAxMjglMjAlMjAlNUMlMEElMjAtLW91dHB1dF9kaXIlMjAlMkZ0bXAlMkZkZWJ1Z19zcXVhZCUyRiUyMCU1QyUwQSUyMC0tbm9fY3VkYSUyMCU1QyUwQSUyMC0tZGRwX2JhY2tlbmQlMjBjY2wlMjAlNUMlMEElMjAtLXVzZV9pcGV4JTIwJTVDJTBBJTIwLS1iZjE2",highlighted:` export CCL_WORKER_COUNT=1
 export MASTER_ADDR=xxx.xxx.xxx.xxx #node0 ip
 mpirun -f hostfile -n 4 -ppn 2 \\
 -genv OMP_NUM_THREADS=23 \\
 python3 run_qa.py \\
 --model_name_or_path google-bert/bert-large-uncased \\
 --dataset_name squad \\
 --do_train \\
 --do_eval \\
 --per_device_train_batch_size 12  \\
 --learning_rate 3e-5  \\
 --num_train_epochs 2  \\
 --max_seq_length 384 \\
 --doc_stride 128  \\
 --output_dir /tmp/debug_squad/ \\
 --no_cuda \\
 --ddp_backend ccl \\
 --use_ipex \\
 --bf16`,wrap:!1}}),lt=new h({props:{title:"Usage with Kubernetes",local:"usage-with-kubernetes",headingTag:"h2"}}),st=new h({props:{title:"Setup",local:"setup",headingTag:"h3"}}),it=new C({props:{code:"RlJPTSUyMGludGVsJTJGYWktd29ya2Zsb3dzJTNBdG9yY2gtMi4wLjEtaHVnZ2luZ2ZhY2UtbXVsdGlub2RlLXB5My45JTBBJTBBV09SS0RJUiUyMCUyRndvcmtzcGFjZSUwQSUwQSUyMyUyMERvd25sb2FkJTIwYW5kJTIwZXh0cmFjdCUyMHRoZSUyMHRyYW5zZm9ybWVycyUyMGNvZGUlMEFBUkclMjBIRl9UUkFOU0ZPUk1FUlNfVkVSJTNEJTIyNC4zNS4yJTIyJTBBUlVOJTIwbWtkaXIlMjB0cmFuc2Zvcm1lcnMlMjAlMjYlMjYlMjAlNUMlMEElMjAlMjAlMjAlMjBjdXJsJTIwLXNTTCUyMC0tcmV0cnklMjA1JTIwaHR0cHMlM0ElMkYlMkZnaXRodWIuY29tJTJGaHVnZ2luZ2ZhY2UlMkZ0cmFuc2Zvcm1lcnMlMkZhcmNoaXZlJTJGcmVmcyUyRnRhZ3MlMkZ2JTI0JTdCSEZfVFJBTlNGT1JNRVJTX1ZFUiU3RC50YXIuZ3olMjAlN0MlMjB0YXIlMjAtQyUyMHRyYW5zZm9ybWVycyUyMC0tc3RyaXAtY29tcG9uZW50cyUzRDElMjAteHpmJTIwLQ==",highlighted:`<span class="hljs-keyword">FROM</span> intel/ai-workflows:torch-<span class="hljs-number">2.0</span>.<span class="hljs-number">1</span>-huggingface-multinode-py3.<span class="hljs-number">9</span>

<span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /workspace</span>

<span class="hljs-comment"># Download and extract the transformers code</span>
<span class="hljs-keyword">ARG</span> HF_TRANSFORMERS_VER=<span class="hljs-string">&quot;4.35.2&quot;</span>
<span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">mkdir</span> transformers &amp;&amp; \\
    curl -sSL --retry 5 https://github.com/huggingface/transformers/archive/refs/tags/v<span class="hljs-variable">\${HF_TRANSFORMERS_VER}</span>.tar.gz | tar -C transformers --strip-components=1 -xzf -</span>`,wrap:!1}}),rt=new h({props:{title:"PyTorchJob Specification File",local:"pytorchjob-specification-file",headingTag:"h3"}}),Tt=new C({props:{code:"YXBpVmVyc2lvbiUzQSUyMCUyMmt1YmVmbG93Lm9yZyUyRnYxJTIyJTBBa2luZCUzQSUyMFB5VG9yY2hKb2IlMEFtZXRhZGF0YSUzQSUwQSUyMCUyMG5hbWUlM0ElMjB0cmFuc2Zvcm1lcnMtcHl0b3JjaGpvYiUwQSUyMCUyMG5hbWVzcGFjZSUzQSUyMGt1YmVmbG93JTBBc3BlYyUzQSUwQSUyMCUyMGVsYXN0aWNQb2xpY3klM0ElMEElMjAlMjAlMjAlMjByZHp2QmFja2VuZCUzQSUyMGMxMGQlMEElMjAlMjAlMjAlMjBtaW5SZXBsaWNhcyUzQSUyMDElMEElMjAlMjAlMjAlMjBtYXhSZXBsaWNhcyUzQSUyMDQlMEElMjAlMjAlMjAlMjBtYXhSZXN0YXJ0cyUzQSUyMDEwJTBBJTIwJTIwcHl0b3JjaFJlcGxpY2FTcGVjcyUzQSUwQSUyMCUyMCUyMCUyMFdvcmtlciUzQSUwQSUyMCUyMCUyMCUyMCUyMCUyMHJlcGxpY2FzJTNBJTIwNCUyMCUyMCUyMyUyMFRoZSUyMG51bWJlciUyMG9mJTIwd29ya2VyJTIwcG9kcyUwQSUyMCUyMCUyMCUyMCUyMCUyMHJlc3RhcnRQb2xpY3klM0ElMjBPbkZhaWx1cmUlMEElMjAlMjAlMjAlMjAlMjAlMjB0ZW1wbGF0ZSUzQSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHNwZWMlM0ElMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBjb250YWluZXJzJTNBJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMG5hbWUlM0ElMjBweXRvcmNoJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwaW1hZ2UlM0ElMjAlM0NpbWFnZSUyMG5hbWUlM0UlM0ElM0N0YWclM0UlMjAlMjAlMjMlMjBTcGVjaWZ5JTIwdGhlJTIwZG9ja2VyJTIwaW1hZ2UlMjB0byUyMHVzZSUyMGZvciUyMHRoZSUyMHdvcmtlciUyMHBvZHMlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBpbWFnZVB1bGxQb2xpY3klM0ElMjBJZk5vdFByZXNlbnQlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBjb21tYW5kJTNBJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMHRvcmNocnVuJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMCUyRndvcmtzcGFjZSUyRnRyYW5zZm9ybWVycyUyRmV4YW1wbGVzJTJGcHl0b3JjaCUyRnF1ZXN0aW9uLWFuc3dlcmluZyUyRnJ1bl9xYS5weSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAtLW1vZGVsX25hbWVfb3JfcGF0aCUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAlMjJnb29nbGUtYmVydCUyRmJlcnQtbGFyZ2UtdW5jYXNlZCUyMiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAtLWRhdGFzZXRfbmFtZSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAlMjJzcXVhZCUyMiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAtLWRvX3RyYWluJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMC0tZG9fZXZhbCUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAtLXBlcl9kZXZpY2VfdHJhaW5fYmF0Y2hfc2l6ZSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAlMjIxMiUyMiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAtLWxlYXJuaW5nX3JhdGUlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAtJTIwJTIyM2UtNSUyMiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAtLW51bV90cmFpbl9lcG9jaHMlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAtJTIwJTIyMiUyMiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAtLW1heF9zZXFfbGVuZ3RoJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMCUyMjM4NCUyMiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAtLWRvY19zdHJpZGUlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAtJTIwJTIyMTI4JTIyJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMC0tb3V0cHV0X2RpciUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjAlMjIlMkZ0bXAlMkZwdmMtbW91bnQlMkZvdXRwdXQlMjIlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAtJTIwLS1ub19jdWRhJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMC0tZGRwX2JhY2tlbmQlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAtJTIwJTIyY2NsJTIyJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMC0tdXNlX2lwZXglMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAtJTIwLS1iZjE2JTIwJTIwJTIzJTIwU3BlY2lmeSUyMC0tYmYxNiUyMGlmJTIweW91ciUyMGhhcmR3YXJlJTIwc3VwcG9ydHMlMjBiZmxvYXQxNiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGVudiUzQSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjBuYW1lJTNBJTIwTERfUFJFTE9BRCUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHZhbHVlJTNBJTIwJTIyJTJGdXNyJTJGbGliJTJGeDg2XzY0LWxpbnV4LWdudSUyRmxpYnRjbWFsbG9jLnNvLjQuNS45JTNBJTJGdXNyJTJGbG9jYWwlMkZsaWIlMkZsaWJpb21wNS5zbyUyMiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjBuYW1lJTNBJTIwVFJBTlNGT1JNRVJTX0NBQ0hFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwdmFsdWUlM0ElMjAlMjIlMkZ0bXAlMkZwdmMtbW91bnQlMkZ0cmFuc2Zvcm1lcnNfY2FjaGUlMjIlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAtJTIwbmFtZSUzQSUyMEhGX0RBVEFTRVRTX0NBQ0hFJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwdmFsdWUlM0ElMjAlMjIlMkZ0bXAlMkZwdmMtbW91bnQlMkZoZl9kYXRhc2V0c19jYWNoZSUyMiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjBuYW1lJTNBJTIwTE9HTEVWRUwlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjB2YWx1ZSUzQSUyMCUyMklORk8lMjIlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAtJTIwbmFtZSUzQSUyMENDTF9XT1JLRVJfQ09VTlQlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjB2YWx1ZSUzQSUyMCUyMjElMjIlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAtJTIwbmFtZSUzQSUyME9NUF9OVU1fVEhSRUFEUyUyMCUyMCUyMyUyMENhbiUyMGJlJTIwdHVuZWQlMjBmb3IlMjBvcHRpbWFsJTIwcGVyZm9ybWFuY2UlMEEtJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwdmFsdWUlM0ElMjAlMjI1NiUyMiUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMHJlc291cmNlcyUzQSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGxpbWl0cyUzQSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGNwdSUzQSUyMDIwMCUyMCUyMCUyMyUyMFVwZGF0ZSUyMHRoZSUyMENQVSUyMGFuZCUyMG1lbW9yeSUyMGxpbWl0JTIwdmFsdWVzJTIwYmFzZWQlMjBvbiUyMHlvdXIlMjBub2RlcyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMG1lbW9yeSUzQSUyMDEyOEdpJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwcmVxdWVzdHMlM0ElMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBjcHUlM0ElMjAyMDAlMjAlMjAlMjMlMjBVcGRhdGUlMjB0aGUlMjBDUFUlMjBhbmQlMjBtZW1vcnklMjByZXF1ZXN0JTIwdmFsdWVzJTIwYmFzZWQlMjBvbiUyMHlvdXIlMjBub2RlcyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMG1lbW9yeSUzQSUyMDEyOEdpJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwdm9sdW1lTW91bnRzJTNBJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMG5hbWUlM0ElMjBwdmMtdm9sdW1lJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwbW91bnRQYXRoJTNBJTIwJTJGdG1wJTJGcHZjLW1vdW50JTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMG1vdW50UGF0aCUzQSUyMCUyRmRldiUyRnNobSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMG5hbWUlM0ElMjBkc2htJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwcmVzdGFydFBvbGljeSUzQSUyME5ldmVyJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwbm9kZVNlbGVjdG9yJTNBJTIwJTIwJTIzJTIwJTIwT3B0aW9uYWxseSUyMHVzZSUyMHRoZSUyMG5vZGUlMjBzZWxlY3RvciUyMHRvJTIwc3BlY2lmeSUyMHdoYXQlMjB0eXBlcyUyMG9mJTIwbm9kZXMlMjB0byUyMHVzZSUyMGZvciUyMHRoZSUyMHdvcmtlcnMlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjBub2RlLXR5cGUlM0ElMjBzcHIlMEElMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjAlMjB2b2x1bWVzJTNBJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwLSUyMG5hbWUlM0ElMjBwdmMtdm9sdW1lJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwcGVyc2lzdGVudFZvbHVtZUNsYWltJTNBJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwY2xhaW1OYW1lJTNBJTIwdHJhbnNmb3JtZXJzLXB2YyUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMC0lMjBuYW1lJTNBJTIwZHNobSUwQSUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMCUyMGVtcHR5RGlyJTNBJTBBJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwJTIwbWVkaXVtJTNBJTIwTWVtb3J5",highlighted:`<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">&quot;kubeflow.org/v1&quot;</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PyTorchJob</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">transformers-pytorchjob</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">kubeflow</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">elasticPolicy:</span>
    <span class="hljs-attr">rdzvBackend:</span> <span class="hljs-string">c10d</span>
    <span class="hljs-attr">minReplicas:</span> <span class="hljs-number">1</span>
    <span class="hljs-attr">maxReplicas:</span> <span class="hljs-number">4</span>
    <span class="hljs-attr">maxRestarts:</span> <span class="hljs-number">10</span>
  <span class="hljs-attr">pytorchReplicaSpecs:</span>
    <span class="hljs-attr">Worker:</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">4</span>  <span class="hljs-comment"># The number of worker pods</span>
      <span class="hljs-attr">restartPolicy:</span> <span class="hljs-string">OnFailure</span>
      <span class="hljs-attr">template:</span>
        <span class="hljs-attr">spec:</span>
          <span class="hljs-attr">containers:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">pytorch</span>
              <span class="hljs-attr">image:</span> <span class="hljs-string">&lt;image</span> <span class="hljs-string">name&gt;:&lt;tag&gt;</span>  <span class="hljs-comment"># Specify the docker image to use for the worker pods</span>
              <span class="hljs-attr">imagePullPolicy:</span> <span class="hljs-string">IfNotPresent</span>
              <span class="hljs-attr">command:</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">torchrun</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">/workspace/transformers/examples/pytorch/question-answering/run_qa.py</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--model_name_or_path</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;google-bert/bert-large-uncased&quot;</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--dataset_name</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;squad&quot;</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--do_train</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--do_eval</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--per_device_train_batch_size</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;12&quot;</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--learning_rate</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;3e-5&quot;</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--num_train_epochs</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;2&quot;</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--max_seq_length</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;384&quot;</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--doc_stride</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;128&quot;</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--output_dir</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;/tmp/pvc-mount/output&quot;</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--no_cuda</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--ddp_backend</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;ccl&quot;</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--use_ipex</span>
                <span class="hljs-bullet">-</span> <span class="hljs-string">--bf16</span>  <span class="hljs-comment"># Specify --bf16 if your hardware supports bfloat16</span>
              <span class="hljs-attr">env:</span>
              <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">LD_PRELOAD</span>
                <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;/usr/lib/x86_64-linux-gnu/libtcmalloc.so.4.5.9:/usr/local/lib/libiomp5.so&quot;</span>
              <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">TRANSFORMERS_CACHE</span>
                <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;/tmp/pvc-mount/transformers_cache&quot;</span>
              <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">HF_DATASETS_CACHE</span>
                <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;/tmp/pvc-mount/hf_datasets_cache&quot;</span>
              <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">LOGLEVEL</span>
                <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;INFO&quot;</span>
              <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">CCL_WORKER_COUNT</span>
                <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;1&quot;</span>
              <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">OMP_NUM_THREADS</span>  <span class="hljs-comment"># Can be tuned for optimal performance</span>
<span class="hljs-bullet">-</span>                <span class="hljs-attr">value:</span> <span class="hljs-string">&quot;56&quot;</span>
              <span class="hljs-attr">resources:</span>
                <span class="hljs-attr">limits:</span>
                  <span class="hljs-attr">cpu:</span> <span class="hljs-number">200</span>  <span class="hljs-comment"># Update the CPU and memory limit values based on your nodes</span>
                  <span class="hljs-attr">memory:</span> <span class="hljs-string">128Gi</span>
                <span class="hljs-attr">requests:</span>
                  <span class="hljs-attr">cpu:</span> <span class="hljs-number">200</span>  <span class="hljs-comment"># Update the CPU and memory request values based on your nodes</span>
                  <span class="hljs-attr">memory:</span> <span class="hljs-string">128Gi</span>
              <span class="hljs-attr">volumeMounts:</span>
              <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">pvc-volume</span>
                <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/tmp/pvc-mount</span>
              <span class="hljs-bullet">-</span> <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/dev/shm</span>
                <span class="hljs-attr">name:</span> <span class="hljs-string">dshm</span>
          <span class="hljs-attr">restartPolicy:</span> <span class="hljs-string">Never</span>
          <span class="hljs-attr">nodeSelector:</span>  <span class="hljs-comment">#  Optionally use the node selector to specify what types of nodes to use for the workers</span>
            <span class="hljs-attr">node-type:</span> <span class="hljs-string">spr</span>
          <span class="hljs-attr">volumes:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">pvc-volume</span>
            <span class="hljs-attr">persistentVolumeClaim:</span>
              <span class="hljs-attr">claimName:</span> <span class="hljs-string">transformers-pvc</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">dshm</span>
            <span class="hljs-attr">emptyDir:</span>
              <span class="hljs-attr">medium:</span> <span class="hljs-string">Memory</span>`,wrap:!1}}),d=new Je({props:{$$slots:{default:[ve]},$$scope:{ctx:At}}}),jt=new h({props:{title:"Deploy",local:"deploy",headingTag:"h3"}}),ht=new C({props:{code:"a3ViZWN0bCUyMGNyZWF0ZSUyMC1mJTIwcHl0b3JjaGpvYi55YW1s",highlighted:"kubectl create -f pytorchjob.yaml",wrap:!1}}),mt=new C({props:{code:"",highlighted:`NAME                                                     READY   STATUS                  RESTARTS          AGE
<span class="hljs-meta prompt_">...</span>
transformers-pytorchjob-worker-0                         1/1     Running                 0                 7m37s
transformers-pytorchjob-worker-1                         1/1     Running                 0                 7m37s
transformers-pytorchjob-worker-2                         1/1     Running                 0                 7m37s
transformers-pytorchjob-worker-3                         1/1     Running                 0                 7m37s
<span class="hljs-meta prompt_">...</span>`,wrap:!1}}),dt=new C({props:{code:"a3ViZWN0bCUyMGxvZ3MlMjAtbiUyMGt1YmVmbG93JTIwdHJhbnNmb3JtZXJzLXB5dG9yY2hqb2Itd29ya2VyLTAlMjAtZg==",highlighted:"kubectl logs -n kubeflow transformers-pytorchjob-worker-0 -f",wrap:!1}}),ft=new h({props:{title:"Summary",local:"summary",headingTag:"h2"}}),{c(){r=M("meta"),J=n(),j=M("p"),m=n(),o(I.$$.fragment),vt=n(),f=M("p"),f.innerHTML=Zl,$t=n(),o(b.$$.fragment),Bt=n(),A=M("p"),A.innerHTML=El,_t=n(),g=M("p"),g.innerHTML=Rl,xt=n(),v=M("p"),v.innerHTML=Gl,St=n(),o($.$$.fragment),Zt=n(),B=M("p"),B.textContent=kl,Et=n(),_=M("table"),_.innerHTML=Wl,Rt=n(),x=M("p"),x.innerHTML=Nl,Gt=n(),o(S.$$.fragment),kt=n(),Z=M("p"),Z.innerHTML=Ll,Wt=n(),o(u.$$.fragment),Nt=n(),o(E.$$.fragment),Lt=n(),R=M("p"),R.textContent=Vl,Vt=n(),G=M("p"),G.textContent=Pl,Pt=n(),k=M("p"),k.textContent=Xl,Xt=n(),o(W.$$.fragment),Ht=n(),N=M("p"),N.textContent=Hl,Qt=n(),o(L.$$.fragment),Ft=n(),o(V.$$.fragment),Yt=n(),P=M("p"),P.innerHTML=Ql,zt=n(),X=M("p"),X.textContent=Fl,qt=n(),o(H.$$.fragment),Dt=n(),Q=M("p"),Q.innerHTML=Yl,Ot=n(),F=M("p"),F.innerHTML=zl,Kt=n(),Y=M("p"),Y.textContent=ql,tl=n(),o(z.$$.fragment),ll=n(),q=M("p"),q.textContent=Dl,el=n(),D=M("p"),D.textContent=Ol,sl=n(),o(O.$$.fragment),nl=n(),K=M("p"),K.innerHTML=Kl,al=n(),o(tt.$$.fragment),Ml=n(),o(lt.$$.fragment),il=n(),et=M("p"),et.innerHTML=te,pl=n(),o(st.$$.fragment),rl=n(),nt=M("p"),nt.textContent=le,ol=n(),at=M("ul"),at.innerHTML=ee,yl=n(),Mt=M("p"),Mt.innerHTML=se,Ul=n(),o(it.$$.fragment),cl=n(),pt=M("p"),pt.textContent=ne,Tl=n(),o(rt.$$.fragment),wl=n(),ot=M("p"),ot.innerHTML=ae,jl=n(),yt=M("ul"),yt.innerHTML=Me,Cl=n(),Ut=M("p"),Ut.textContent=ie,hl=n(),ct=M("p"),ct.innerHTML=pe,Jl=n(),o(Tt.$$.fragment),ml=n(),wt=M("p"),wt.textContent=re,ul=n(),o(d.$$.fragment),dl=n(),o(jt.$$.fragment),Il=n(),Ct=M("p"),Ct.textContent=oe,fl=n(),o(ht.$$.fragment),bl=n(),Jt=M("p"),Jt.innerHTML=ye,Al=n(),o(mt.$$.fragment),gl=n(),ut=M("p"),ut.innerHTML=Ue,vl=n(),o(dt.$$.fragment),$l=n(),It=M("p"),It.innerHTML=ce,Bl=n(),o(ft.$$.fragment),_l=n(),bt=M("p"),bt.textContent=Te,xl=n(),gt=M("p"),this.h()},l(t){const l=be("svelte-u9bgzb",document.head);r=i(l,"META",{name:!0,content:!0}),l.forEach(e),J=a(t),j=i(t,"P",{}),Ce(j).forEach(e),m=a(t),y(I.$$.fragment,t),vt=a(t),f=i(t,"P",{"data-svelte-h":!0}),p(f)!=="svelte-k7boah"&&(f.innerHTML=Zl),$t=a(t),y(b.$$.fragment,t),Bt=a(t),A=i(t,"P",{"data-svelte-h":!0}),p(A)!=="svelte-bivv3w"&&(A.innerHTML=El),_t=a(t),g=i(t,"P",{"data-svelte-h":!0}),p(g)!=="svelte-5o21pv"&&(g.innerHTML=Rl),xt=a(t),v=i(t,"P",{"data-svelte-h":!0}),p(v)!=="svelte-1qrzsug"&&(v.innerHTML=Gl),St=a(t),y($.$$.fragment,t),Zt=a(t),B=i(t,"P",{"data-svelte-h":!0}),p(B)!=="svelte-7vxiqb"&&(B.textContent=kl),Et=a(t),_=i(t,"TABLE",{"data-svelte-h":!0}),p(_)!=="svelte-19gn9co"&&(_.innerHTML=Wl),Rt=a(t),x=i(t,"P",{"data-svelte-h":!0}),p(x)!=="svelte-21jzz8"&&(x.innerHTML=Nl),Gt=a(t),y(S.$$.fragment,t),kt=a(t),Z=i(t,"P",{"data-svelte-h":!0}),p(Z)!=="svelte-oc1h4j"&&(Z.innerHTML=Ll),Wt=a(t),y(u.$$.fragment,t),Nt=a(t),y(E.$$.fragment,t),Lt=a(t),R=i(t,"P",{"data-svelte-h":!0}),p(R)!=="svelte-1hu54a3"&&(R.textContent=Vl),Vt=a(t),G=i(t,"P",{"data-svelte-h":!0}),p(G)!=="svelte-1nteuhh"&&(G.textContent=Pl),Pt=a(t),k=i(t,"P",{"data-svelte-h":!0}),p(k)!=="svelte-324hiy"&&(k.textContent=Xl),Xt=a(t),y(W.$$.fragment,t),Ht=a(t),N=i(t,"P",{"data-svelte-h":!0}),p(N)!=="svelte-1x3l803"&&(N.textContent=Hl),Qt=a(t),y(L.$$.fragment,t),Ft=a(t),y(V.$$.fragment,t),Yt=a(t),P=i(t,"P",{"data-svelte-h":!0}),p(P)!=="svelte-12dw1vq"&&(P.innerHTML=Ql),zt=a(t),X=i(t,"P",{"data-svelte-h":!0}),p(X)!=="svelte-1w8k00"&&(X.textContent=Fl),qt=a(t),y(H.$$.fragment,t),Dt=a(t),Q=i(t,"P",{"data-svelte-h":!0}),p(Q)!=="svelte-k782b4"&&(Q.innerHTML=Yl),Ot=a(t),F=i(t,"P",{"data-svelte-h":!0}),p(F)!=="svelte-kvcz06"&&(F.innerHTML=zl),Kt=a(t),Y=i(t,"P",{"data-svelte-h":!0}),p(Y)!=="svelte-m6wzyw"&&(Y.textContent=ql),tl=a(t),y(z.$$.fragment,t),ll=a(t),q=i(t,"P",{"data-svelte-h":!0}),p(q)!=="svelte-cyuir"&&(q.textContent=Dl),el=a(t),D=i(t,"P",{"data-svelte-h":!0}),p(D)!=="svelte-dlvz8o"&&(D.textContent=Ol),sl=a(t),y(O.$$.fragment,t),nl=a(t),K=i(t,"P",{"data-svelte-h":!0}),p(K)!=="svelte-1vsu09v"&&(K.innerHTML=Kl),al=a(t),y(tt.$$.fragment,t),Ml=a(t),y(lt.$$.fragment,t),il=a(t),et=i(t,"P",{"data-svelte-h":!0}),p(et)!=="svelte-lwry78"&&(et.innerHTML=te),pl=a(t),y(st.$$.fragment,t),rl=a(t),nt=i(t,"P",{"data-svelte-h":!0}),p(nt)!=="svelte-1p9mop9"&&(nt.textContent=le),ol=a(t),at=i(t,"UL",{"data-svelte-h":!0}),p(at)!=="svelte-4w2oti"&&(at.innerHTML=ee),yl=a(t),Mt=i(t,"P",{"data-svelte-h":!0}),p(Mt)!=="svelte-vaz613"&&(Mt.innerHTML=se),Ul=a(t),y(it.$$.fragment,t),cl=a(t),pt=i(t,"P",{"data-svelte-h":!0}),p(pt)!=="svelte-1ra1dus"&&(pt.textContent=ne),Tl=a(t),y(rt.$$.fragment,t),wl=a(t),ot=i(t,"P",{"data-svelte-h":!0}),p(ot)!=="svelte-ceey14"&&(ot.innerHTML=ae),jl=a(t),yt=i(t,"UL",{"data-svelte-h":!0}),p(yt)!=="svelte-1w74v7u"&&(yt.innerHTML=Me),Cl=a(t),Ut=i(t,"P",{"data-svelte-h":!0}),p(Ut)!=="svelte-1rtua9k"&&(Ut.textContent=ie),hl=a(t),ct=i(t,"P",{"data-svelte-h":!0}),p(ct)!=="svelte-1sen8je"&&(ct.innerHTML=pe),Jl=a(t),y(Tt.$$.fragment,t),ml=a(t),wt=i(t,"P",{"data-svelte-h":!0}),p(wt)!=="svelte-l1jsdc"&&(wt.textContent=re),ul=a(t),y(d.$$.fragment,t),dl=a(t),y(jt.$$.fragment,t),Il=a(t),Ct=i(t,"P",{"data-svelte-h":!0}),p(Ct)!=="svelte-w0q5hc"&&(Ct.textContent=oe),fl=a(t),y(ht.$$.fragment,t),bl=a(t),Jt=i(t,"P",{"data-svelte-h":!0}),p(Jt)!=="svelte-m28e4v"&&(Jt.innerHTML=ye),Al=a(t),y(mt.$$.fragment,t),gl=a(t),ut=i(t,"P",{"data-svelte-h":!0}),p(ut)!=="svelte-16sv8wu"&&(ut.innerHTML=Ue),vl=a(t),y(dt.$$.fragment,t),$l=a(t),It=i(t,"P",{"data-svelte-h":!0}),p(It)!=="svelte-ey1892"&&(It.innerHTML=ce),Bl=a(t),y(ft.$$.fragment,t),_l=a(t),bt=i(t,"P",{"data-svelte-h":!0}),p(bt)!=="svelte-prt8yq"&&(bt.textContent=Te),xl=a(t),gt=i(t,"P",{}),Ce(gt).forEach(e),this.h()},h(){he(r,"name","hf:doc:metadata"),he(r,"content",Be)},m(t,l){Ae(document.head,r),s(t,J,l),s(t,j,l),s(t,m,l),U(I,t,l),s(t,vt,l),s(t,f,l),s(t,$t,l),U(b,t,l),s(t,Bt,l),s(t,A,l),s(t,_t,l),s(t,g,l),s(t,xt,l),s(t,v,l),s(t,St,l),U($,t,l),s(t,Zt,l),s(t,B,l),s(t,Et,l),s(t,_,l),s(t,Rt,l),s(t,x,l),s(t,Gt,l),U(S,t,l),s(t,kt,l),s(t,Z,l),s(t,Wt,l),U(u,t,l),s(t,Nt,l),U(E,t,l),s(t,Lt,l),s(t,R,l),s(t,Vt,l),s(t,G,l),s(t,Pt,l),s(t,k,l),s(t,Xt,l),U(W,t,l),s(t,Ht,l),s(t,N,l),s(t,Qt,l),U(L,t,l),s(t,Ft,l),U(V,t,l),s(t,Yt,l),s(t,P,l),s(t,zt,l),s(t,X,l),s(t,qt,l),U(H,t,l),s(t,Dt,l),s(t,Q,l),s(t,Ot,l),s(t,F,l),s(t,Kt,l),s(t,Y,l),s(t,tl,l),U(z,t,l),s(t,ll,l),s(t,q,l),s(t,el,l),s(t,D,l),s(t,sl,l),U(O,t,l),s(t,nl,l),s(t,K,l),s(t,al,l),U(tt,t,l),s(t,Ml,l),U(lt,t,l),s(t,il,l),s(t,et,l),s(t,pl,l),U(st,t,l),s(t,rl,l),s(t,nt,l),s(t,ol,l),s(t,at,l),s(t,yl,l),s(t,Mt,l),s(t,Ul,l),U(it,t,l),s(t,cl,l),s(t,pt,l),s(t,Tl,l),U(rt,t,l),s(t,wl,l),s(t,ot,l),s(t,jl,l),s(t,yt,l),s(t,Cl,l),s(t,Ut,l),s(t,hl,l),s(t,ct,l),s(t,Jl,l),U(Tt,t,l),s(t,ml,l),s(t,wt,l),s(t,ul,l),U(d,t,l),s(t,dl,l),U(jt,t,l),s(t,Il,l),s(t,Ct,l),s(t,fl,l),U(ht,t,l),s(t,bl,l),s(t,Jt,l),s(t,Al,l),U(mt,t,l),s(t,gl,l),s(t,ut,l),s(t,vl,l),U(dt,t,l),s(t,$l,l),s(t,It,l),s(t,Bl,l),U(ft,t,l),s(t,_l,l),s(t,bt,l),s(t,xl,l),s(t,gt,l),Sl=!0},p(t,[l]){const we={};l&2&&(we.$$scope={dirty:l,ctx:t}),u.$set(we);const je={};l&2&&(je.$$scope={dirty:l,ctx:t}),d.$set(je)},i(t){Sl||(c(I.$$.fragment,t),c(b.$$.fragment,t),c($.$$.fragment,t),c(S.$$.fragment,t),c(u.$$.fragment,t),c(E.$$.fragment,t),c(W.$$.fragment,t),c(L.$$.fragment,t),c(V.$$.fragment,t),c(H.$$.fragment,t),c(z.$$.fragment,t),c(O.$$.fragment,t),c(tt.$$.fragment,t),c(lt.$$.fragment,t),c(st.$$.fragment,t),c(it.$$.fragment,t),c(rt.$$.fragment,t),c(Tt.$$.fragment,t),c(d.$$.fragment,t),c(jt.$$.fragment,t),c(ht.$$.fragment,t),c(mt.$$.fragment,t),c(dt.$$.fragment,t),c(ft.$$.fragment,t),Sl=!0)},o(t){T(I.$$.fragment,t),T(b.$$.fragment,t),T($.$$.fragment,t),T(S.$$.fragment,t),T(u.$$.fragment,t),T(E.$$.fragment,t),T(W.$$.fragment,t),T(L.$$.fragment,t),T(V.$$.fragment,t),T(H.$$.fragment,t),T(z.$$.fragment,t),T(O.$$.fragment,t),T(tt.$$.fragment,t),T(lt.$$.fragment,t),T(st.$$.fragment,t),T(it.$$.fragment,t),T(rt.$$.fragment,t),T(Tt.$$.fragment,t),T(d.$$.fragment,t),T(jt.$$.fragment,t),T(ht.$$.fragment,t),T(mt.$$.fragment,t),T(dt.$$.fragment,t),T(ft.$$.fragment,t),Sl=!1},d(t){t&&(e(J),e(j),e(m),e(vt),e(f),e($t),e(Bt),e(A),e(_t),e(g),e(xt),e(v),e(St),e(Zt),e(B),e(Et),e(_),e(Rt),e(x),e(Gt),e(kt),e(Z),e(Wt),e(Nt),e(Lt),e(R),e(Vt),e(G),e(Pt),e(k),e(Xt),e(Ht),e(N),e(Qt),e(Ft),e(Yt),e(P),e(zt),e(X),e(qt),e(Dt),e(Q),e(Ot),e(F),e(Kt),e(Y),e(tl),e(ll),e(q),e(el),e(D),e(sl),e(nl),e(K),e(al),e(Ml),e(il),e(et),e(pl),e(rl),e(nt),e(ol),e(at),e(yl),e(Mt),e(Ul),e(cl),e(pt),e(Tl),e(wl),e(ot),e(jl),e(yt),e(Cl),e(Ut),e(hl),e(ct),e(Jl),e(ml),e(wt),e(ul),e(dl),e(Il),e(Ct),e(fl),e(bl),e(Jt),e(Al),e(gl),e(ut),e(vl),e($l),e(It),e(Bl),e(_l),e(bt),e(xl),e(gt)),e(r),w(I,t),w(b,t),w($,t),w(S,t),w(u,t),w(E,t),w(W,t),w(L,t),w(V,t),w(H,t),w(z,t),w(O,t),w(tt,t),w(lt,t),w(st,t),w(it,t),w(rt,t),w(Tt,t),w(d,t),w(jt,t),w(ht,t),w(mt,t),w(dt,t),w(ft,t)}}}const Be='{"title":"Efficient Training on Multiple CPUs","local":"efficient-training-on-multiple-cpus","sections":[{"title":"Intel® oneCCL Bindings for PyTorch","local":"intel-oneccl-bindings-for-pytorch","sections":[{"title":"Intel® oneCCL Bindings for PyTorch installation","local":"intel-oneccl-bindings-for-pytorch-installation","sections":[],"depth":3}],"depth":2},{"title":"Intel® MPI library","local":"intel-mpi-library","sections":[{"title":"Intel® Extension for PyTorch installation","local":"intel-extension-for-pytorch-installation","sections":[],"depth":4}],"depth":2},{"title":"Usage in Trainer","local":"usage-in-trainer","sections":[],"depth":2},{"title":"Usage with Kubernetes","local":"usage-with-kubernetes","sections":[{"title":"Setup","local":"setup","sections":[],"depth":3},{"title":"PyTorchJob Specification File","local":"pytorchjob-specification-file","sections":[],"depth":3},{"title":"Deploy","local":"deploy","sections":[],"depth":3}],"depth":2},{"title":"Summary","local":"summary","sections":[],"depth":2}],"depth":1}';function _e(At){return de(()=>{new URLSearchParams(window.location.search).get("fw")}),[]}class Ge extends Ie{constructor(r){super(),fe(this,r,_e,$e,ue,{})}}export{Ge as component};
